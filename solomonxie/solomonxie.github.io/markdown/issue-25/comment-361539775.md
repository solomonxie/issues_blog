## Vim UltiSnips自动补全 （Python强依赖）
> 想要Vim像Sublime一样快速编程，就需要各种好的snippets快速生成一段预备好的代码。一般常用的插件是`UltiSnips`作为生成代码的引擎，`Vim-snippets`插件作为各种语言的常用语句包。

**注意：此插件极其依赖Python特定版本，一旦本地python版本有一丁点变动，整个vim的使用都会完全受阻！**

### 安装Snippets插件
在已有Vundle插件管理器的基础上，直接在`.vimrc`文件中加入这两个插件名：
![image](https://user-images.githubusercontent.com/14041622/35559228-243d437c-05e5-11e8-9c9f-4993bdd80282.png)
然后退出vim再进入vim，输入命令: `:PluginInstall`，等待安装完成后，重新进入vim，就可以正常使用了。

### 创建snippets
相比于sublime， 在vim中创建snippets是稍微麻烦点。主要跟随这几点：
- 找到插件目录，是位于`~/.vim/bundle/`下的`ultisnips`和`vim-snippets`。
- 不要在`vim-snippets`中预备好的各语言snippets上直接修改，因为每次更新都会被覆盖。
- 必须在`ultisnips`文件夹下创建一个`UltiSnips`文件夹，所有自定义代码都存在这里。
- 自定义的代码片段必须给每个语言创建单独文件，保存的文件名必须遵循`语言名.snippets`格式.如果是运用到所有文件上的，就叫`all.snippets`。
- 文件保存后即刻生效，无需重启vim。
- 代码片段文件里面需要遵循如下格式：
```vim
snippet  关键词 "描述" 生成模式
代码片段
endsnippet
```
其中，生成模式有很多种，一般为`b`，即只有在一行的开头输入关键词时，才会调用代码片段。其它还有b, A, w, i等模式，具体可以在vim 的`:help ultisnip`中查看文档。

举个例子，我们要为html文件做一些快捷代码，那么：
首先创建、或修改一个snippets文件：
```sh
$ vim ~/.vim/bundle/ultisnips/UltiSnips/html.snippets
```

然后添加如下格式的声明：
```vim
snippet html "create html 5 structure" b
<!DOCTYPE html>
<html>
<head><title></title></head>
<body>
</body>
</html>
endsnippet
```
保存后打开一个html文件，找个地方输入`html`然后按Tab，就会弹出预定好的html代码。
注意：由于安装了`vim-snippets`常用代码集，html文件中的很多关键词都被占用了，比如`html`。所以要避免冲突，可以直接到`~/.vim/bundle/vim-snippets/UltiSnips`中对应的文件中查看：
![image](https://user-images.githubusercontent.com/14041622/35560217-b50bba1c-05e7-11e8-8595-3109f8e68a48.png)


### snippets 高阶用法
> 上面只是输入关键词然后生成一段固定内容的方法。实际上更常用的方法是，根据给定的变量生成动态内容，或是指定需要更改的几个位置，生成内容后自动把焦点分别指向这几个位置供你修改。


## `UltiSnips插件报错：缺少的Python支持问题`
经常因为系统的Python版本变动，导致整个Vim瘫痪，起因就是这个Snippets插件。因为它完全依赖python，所以导致vim每次敲键盘都会报错。
![image](https://user-images.githubusercontent.com/14041622/39951062-fa1a1ab0-55b8-11e8-9be8-f404e66ee0ec.png)

#### Mac解决方案：
最简单的是通过升级vim解决。因为升级vim时，会重新根据当前的环境进行make编译。所以之前由于python版本的改变导致的问题，都这么解决了。
```shell
$ brew upgrade vim
```
注意：
网上找的话解决方案真的不多，如果有，也几乎都是劝你重新自己根据环境来手动make编译vim的。所以最好的方法还是upgrade vim，相当于自动重新编译了。