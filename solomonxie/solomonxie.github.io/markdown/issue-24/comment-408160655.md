# Python接收邮件
> 这是个大课题，远比发送邮件要复杂的多的多。这就是为什么网上中文外文搜邮件的问题，绝大多数都是讲发送的而讲接收的很少。

## MIME邮件协议

[参考：阮一峰 - MIME笔记](http://www.ruanyifeng.com/blog/2008/06/mime.html)
[参考：MIME邮件的组织结构](https://blog.csdn.net/wl_xt/article/details/20048335)

先不论Python，也不谈什么邮件发展历史，只论现在：
现在我们要达到通过编程来接收邮件，就绝对避不开这个问题：**`MIME邮件结构`**.

MIME是一整套的协议，就像HTTP协议、TCP协议之类的一样，都是解析邮件的一套规则。

所以我们想要解析一封邮件（把它拆成人能读懂的标题、收发件人、内容、附件等），就必须得理解这套协议。
**就算有现成的Python处理库也一样要懂了以后才能开始操作。**

了解MIME协议，其实主要就是了解`邮件的嵌套结构`。这个懂了就全懂了。

要知道，我们收到的一封邮件可能是以下这几种不同的结构类型：
- 简单的几句话，全是文字。 `(text/plain)`
- 非常漂亮的网页一样的页面。`(text/html)`
- 包括回复另一封邮件的层层嵌套的内容。`(multipart/mixed)`
- 带附件的内容，比如一张图片。`(multipart/mixed)` + `(image/jpeg)`

当然，这不是全部，只是有代表性的几种文档类型。最重要的是知道：
所有超出简单文字或网页HTML之外的，全都是`multiparts`。
最难理解的也是这个multiparts。

下面是最复杂的Multiparts邮件，包括了所有能包括的结构。其中每个**方块**都有自己的`Content Type`和`Body`。

简单点的结构图：

![image](https://user-images.githubusercontent.com/14041622/43276255-ab65d4d6-9136-11e8-9a12-e820adca0f21.png)


详细一点的结构：

![image](https://user-images.githubusercontent.com/14041622/43276230-995fedf8-9136-11e8-8dd5-58979af4c2d9.png)


这里是所有邮件能支持的`Content Type`文档类型：
- `text/plain`: 纯文本，文件扩展名.txt
- `text/html`: HTML文本，文件扩展名.htm和.html
- `image/jpeg`: jpeg格式的图片，文件扩展名.jpg
- `image/gif`: GIF格式的图片，文件扩展名.gif
- `audio/x-wave`: WAVE格式的音频，文件扩展名.wav
- `audio/mpeg`: MP3格式的音频，文件扩展名.mp3
- `video/mpeg`: MPEG格式的视频，文件扩展名.mpg
- `application/zip`: PK-ZIP格式的压缩文件，文件扩展名.zip
