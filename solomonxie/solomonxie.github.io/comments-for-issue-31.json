[{"url":"https://api.github.com/repos/solomonxie/solomonxie.github.io/issues/comments/360579755","html_url":"https://github.com/solomonxie/solomonxie.github.io/issues/31#issuecomment-360579755","issue_url":"https://api.github.com/repos/solomonxie/solomonxie.github.io/issues/31","id":360579755,"user":{"login":"solomonxie","id":14041622,"avatar_url":"https://avatars2.githubusercontent.com/u/14041622?v=4","gravatar_id":"","url":"https://api.github.com/users/solomonxie","html_url":"https://github.com/solomonxie","followers_url":"https://api.github.com/users/solomonxie/followers","following_url":"https://api.github.com/users/solomonxie/following{/other_user}","gists_url":"https://api.github.com/users/solomonxie/gists{/gist_id}","starred_url":"https://api.github.com/users/solomonxie/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/solomonxie/subscriptions","organizations_url":"https://api.github.com/users/solomonxie/orgs","repos_url":"https://api.github.com/users/solomonxie/repos","events_url":"https://api.github.com/users/solomonxie/events{/privacy}","received_events_url":"https://api.github.com/users/solomonxie/received_events","type":"User","site_admin":false},"created_at":"2018-01-25T19:49:23Z","updated_at":"2018-02-04T04:33:15Z","author_association":"OWNER","body":"# EC2的傻瓜式初始配置方案\r\n> AWS 的服务海洋里面，EC2是最常见最常用的一个。也就是平时我们租用云端服务器最常用的虚拟主机，可以让你把网站代码、数据库等等全都部署在上面，然后用户直接连接这个虚拟主机。相对于其它aws的邮箱、数据库、语音等云服务来说，EC2是一个大杂烩，也是个通用平台，做什么都行，看自己。\r\n\r\n1. 登录AWS控制后台，在服务列表中选择EC2 -> 左侧菜单Instances -> Launch Instance\r\n2. 选择合适的映像，推荐社区版的映像：\r\n   社区版有更多Linux发行版，在这里推荐选择ubuntu/images/hvm-ssd/ubuntu-trusty-14.04-amd64-server-20160114.5 ebs hvm\r\n3. 选t2.micro类型的instance，其中会清晰标记这个是免费的\r\n4. 设置详细：全部保持默认就行了\r\n5. 添加存储盘：免费的是20G以内，一般默认的8G足够用\r\n6. Tag可加可不加\r\n7. 安全组：根据需求后期可改，内容较多\r\n8. 综览及确认\r\n9. 选择密钥\r\n   必须要有，创建新的或选择已有的。\r\n   如果这里没创建，则以后ssh登录不了。\r\n10. 用SSH登录\r\n    - 用Linux Shell的SSH命令登录：\r\n      `ssh -i \"私有密钥文件路径.pem\" 用户名@实例的公网IP`\r\n      其中.pem文件是私有密钥，输入路径即可;\r\n      如果是ubuntu的映像，默认用户名是`ubuntu`，\r\n      如果是AWS定制的映像，默认用户名是`ec2-user`;\r\n    - 用Windows的Putty软件登陆：\r\n      需要先用puttygen.exe把`.pem`私钥文件转换为`.ppk`文件，\r\n      然后在菜单`connection -> SSH -> Auth`中，把文件路径填上，\r\n      然后回到主菜单点击连接即可。"},{"url":"https://api.github.com/repos/solomonxie/solomonxie.github.io/issues/comments/360582423","html_url":"https://github.com/solomonxie/solomonxie.github.io/issues/31#issuecomment-360582423","issue_url":"https://api.github.com/repos/solomonxie/solomonxie.github.io/issues/31","id":360582423,"user":{"login":"solomonxie","id":14041622,"avatar_url":"https://avatars2.githubusercontent.com/u/14041622?v=4","gravatar_id":"","url":"https://api.github.com/users/solomonxie","html_url":"https://github.com/solomonxie","followers_url":"https://api.github.com/users/solomonxie/followers","following_url":"https://api.github.com/users/solomonxie/following{/other_user}","gists_url":"https://api.github.com/users/solomonxie/gists{/gist_id}","starred_url":"https://api.github.com/users/solomonxie/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/solomonxie/subscriptions","organizations_url":"https://api.github.com/users/solomonxie/orgs","repos_url":"https://api.github.com/users/solomonxie/repos","events_url":"https://api.github.com/users/solomonxie/events{/privacy}","received_events_url":"https://api.github.com/users/solomonxie/received_events","type":"User","site_admin":false},"created_at":"2018-01-25T19:58:17Z","updated_at":"2018-02-04T04:33:34Z","author_association":"OWNER","body":"# Shadowsocks在AWS EC2运行时的网关设置 (待验证)\r\n```\r\nSecurity Groups -> Inbound -> Edit -> Add -> Custom TCP Rule, TCP, 8000 - 9000, 0.0.0.0/0\r\nSecurity Groups -> Inbound -> Edit -> All traffic, All, All, 0.0.0.0/0\r\n```"},{"url":"https://api.github.com/repos/solomonxie/solomonxie.github.io/issues/comments/362879956","html_url":"https://github.com/solomonxie/solomonxie.github.io/issues/31#issuecomment-362879956","issue_url":"https://api.github.com/repos/solomonxie/solomonxie.github.io/issues/31","id":362879956,"user":{"login":"solomonxie","id":14041622,"avatar_url":"https://avatars2.githubusercontent.com/u/14041622?v=4","gravatar_id":"","url":"https://api.github.com/users/solomonxie","html_url":"https://github.com/solomonxie","followers_url":"https://api.github.com/users/solomonxie/followers","following_url":"https://api.github.com/users/solomonxie/following{/other_user}","gists_url":"https://api.github.com/users/solomonxie/gists{/gist_id}","starred_url":"https://api.github.com/users/solomonxie/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/solomonxie/subscriptions","organizations_url":"https://api.github.com/users/solomonxie/orgs","repos_url":"https://api.github.com/users/solomonxie/repos","events_url":"https://api.github.com/users/solomonxie/events{/privacy}","received_events_url":"https://api.github.com/users/solomonxie/received_events","type":"User","site_admin":false},"created_at":"2018-02-04T04:26:58Z","updated_at":"2018-02-04T04:33:40Z","author_association":"OWNER","body":"# Shadowsocks 服务器安装\r\n\r\n1.创建服务器\r\n2.创建时选择SSH Key，上传本地制作的密钥文件，如`~/.ssh/id_rsa.pub`\r\n3.记住本地SSH Key密钥的访问密码，这样每次登录服务器只要输入它就行了。\r\n4.打开终端, 利用SSH连接,`ssh root@ip-address`\r\n```shell\r\nsudo apt-get update\r\nsudo apt-get install python-pip -y\r\n# 如果提示需要升级pip\r\n# pip install --upgrade pip\r\npip install shadowsocks\r\nsudo vi /etc/shadowsocks.json\r\n{\r\n    \"server\":\"0.0.0.0\",\r\n    \"server_port\": 1111,\r\n    \"password\":\"aaaaaaaa\",\r\n    \"local_address\":\"127.0.0.1\",\r\n    \"method\":\"aes-256-cfb\",\r\n    \"local_port\":1080,\r\n    \"timeout\":300,\r\n    \"fast_open\":false\r\n}\r\n```\r\n\r\nsudo ssserver -c /etc/shadowsocks.json -d start\r\n\r\n如果遇到 permission denied错误, 试一下改变下面文件权限:\r\n```shell\r\nsudo chmod 777 /var/run/shadowsocks.pid\r\nsudo chmod 777 /var/log/shadowsocks.log\r\n```\r\n如果还是不行，那么试试直接按照ssserver的路径启动：\r\n```\r\nsudo /usr/local/bin/ssserver -c /etc/shadowsocks.json -d start\r\n```\r\n![image](https://user-images.githubusercontent.com/14041622/35665785-835dfcf6-0762-11e8-9d84-d730cec37146.png)\r\n"},{"url":"https://api.github.com/repos/solomonxie/solomonxie.github.io/issues/comments/362879982","html_url":"https://github.com/solomonxie/solomonxie.github.io/issues/31#issuecomment-362879982","issue_url":"https://api.github.com/repos/solomonxie/solomonxie.github.io/issues/31","id":362879982,"user":{"login":"solomonxie","id":14041622,"avatar_url":"https://avatars2.githubusercontent.com/u/14041622?v=4","gravatar_id":"","url":"https://api.github.com/users/solomonxie","html_url":"https://github.com/solomonxie","followers_url":"https://api.github.com/users/solomonxie/followers","following_url":"https://api.github.com/users/solomonxie/following{/other_user}","gists_url":"https://api.github.com/users/solomonxie/gists{/gist_id}","starred_url":"https://api.github.com/users/solomonxie/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/solomonxie/subscriptions","organizations_url":"https://api.github.com/users/solomonxie/orgs","repos_url":"https://api.github.com/users/solomonxie/repos","events_url":"https://api.github.com/users/solomonxie/events{/privacy}","received_events_url":"https://api.github.com/users/solomonxie/received_events","type":"User","site_admin":false},"created_at":"2018-02-04T04:27:25Z","updated_at":"2018-02-04T04:33:45Z","author_association":"OWNER","body":"# Shadowsocks 创建好后无法访问\r\n如果开着ss，打不开谷歌，那么最先尝试的是用ssh连接。如果连接成功，那么说明服务器和网络都没问题。剩下只是配置的事了。\r\n1. 检查防火墙配置。亚马逊AWS的防火墙是很严格的，所以多半都会卡在这。\r\n如果是AWS的Lightsails的话，直接在Networking配置里，开启全部端口，如下图：\r\n![image](https://user-images.githubusercontent.com/14041622/35667037-20aa38cc-0767-11e8-814e-504fae373de4.png)\r\n或者谨慎点，在默认配置的基础上，添加自己连接的端口：\r\n![image](https://user-images.githubusercontent.com/14041622/35765788-323cf50c-0906-11e8-8031-897d4264767f.png)\r\n\r\n2. 还不行的话，就在命令行里主动添加防火墙设置：\r\n```shell\r\n# 下载防火墙设置的软件\r\nsudo apt-get install firewalld\r\n# 开启相应的端口\r\nsudo firewall-cmd --zone=public --add-port=你当前服务器的IP地址/tcp --permanent\r\nsudo firewall-cmd --zone=public --add-port=你当前服务器的IP地址/udp --permanent\r\n```\r\n改好后，就可以通过`cat /etc/firewalld/zones/public.xml`这个文件里看到，刚刚的防火墙设置已经生效了。\r\n3. 如果还不行，就试试这招，把ss配置文件的服务器段IP改为`0.0.0.0`（如果已经是这个设置则反之设置成服务器IP地址），然后保存，并重启ssserver，`sudo ssserver -c /etc/shadowsocks.json -d restart`。如下图：\r\n![image](https://user-images.githubusercontent.com/14041622/35667184-a97dc4d4-0767-11e8-9ea7-eff766e65dd8.png)\r\n"},{"url":"https://api.github.com/repos/solomonxie/solomonxie.github.io/issues/comments/362879986","html_url":"https://github.com/solomonxie/solomonxie.github.io/issues/31#issuecomment-362879986","issue_url":"https://api.github.com/repos/solomonxie/solomonxie.github.io/issues/31","id":362879986,"user":{"login":"solomonxie","id":14041622,"avatar_url":"https://avatars2.githubusercontent.com/u/14041622?v=4","gravatar_id":"","url":"https://api.github.com/users/solomonxie","html_url":"https://github.com/solomonxie","followers_url":"https://api.github.com/users/solomonxie/followers","following_url":"https://api.github.com/users/solomonxie/following{/other_user}","gists_url":"https://api.github.com/users/solomonxie/gists{/gist_id}","starred_url":"https://api.github.com/users/solomonxie/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/solomonxie/subscriptions","organizations_url":"https://api.github.com/users/solomonxie/orgs","repos_url":"https://api.github.com/users/solomonxie/repos","events_url":"https://api.github.com/users/solomonxie/events{/privacy}","received_events_url":"https://api.github.com/users/solomonxie/received_events","type":"User","site_admin":false},"created_at":"2018-02-04T04:27:32Z","updated_at":"2018-02-04T04:33:54Z","author_association":"OWNER","body":"# Shadowsock多用户配置\r\n\r\n```json\r\n{\r\n    \"server\": \"0.0.0.0\",\r\n    \"port_password\": {\r\n        \"8381\": \"foobar1\",\r\n        \"8382\": \"foobar2\",\r\n        \"8383\": \"foobar3\",\r\n        \"8384\": \"foobar4\"\r\n    },\r\n    \"timeout\": 300,\r\n    \"method\": \"aes-256-cfb\"\r\n}\r\n```"},{"url":"https://api.github.com/repos/solomonxie/solomonxie.github.io/issues/comments/362880116","html_url":"https://github.com/solomonxie/solomonxie.github.io/issues/31#issuecomment-362880116","issue_url":"https://api.github.com/repos/solomonxie/solomonxie.github.io/issues/31","id":362880116,"user":{"login":"solomonxie","id":14041622,"avatar_url":"https://avatars2.githubusercontent.com/u/14041622?v=4","gravatar_id":"","url":"https://api.github.com/users/solomonxie","html_url":"https://github.com/solomonxie","followers_url":"https://api.github.com/users/solomonxie/followers","following_url":"https://api.github.com/users/solomonxie/following{/other_user}","gists_url":"https://api.github.com/users/solomonxie/gists{/gist_id}","starred_url":"https://api.github.com/users/solomonxie/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/solomonxie/subscriptions","organizations_url":"https://api.github.com/users/solomonxie/orgs","repos_url":"https://api.github.com/users/solomonxie/repos","events_url":"https://api.github.com/users/solomonxie/events{/privacy}","received_events_url":"https://api.github.com/users/solomonxie/received_events","type":"User","site_admin":false},"created_at":"2018-02-04T04:31:31Z","updated_at":"2018-02-04T05:11:11Z","author_association":"OWNER","body":"# AWS Lightsail 无法ping通\r\nping某一个服务器，是需要服务器防火墙允许ICMP协议的数据包的。经查阅，AWS的所有服务是默认关闭icmp的。\r\n除独立的Lightsail外，其它AWS服务都可以在安全组中设置防火墙开启icmp。\r\n然而Lightsail的防火墙设置页面，并没有icmp选项，官方也没有任何相关解决方案。\r\n\r\n    因此目前来说，也就是无法使用ping来测试服务器连接的了。"},{"url":"https://api.github.com/repos/solomonxie/solomonxie.github.io/issues/comments/363006637","html_url":"https://github.com/solomonxie/solomonxie.github.io/issues/31#issuecomment-363006637","issue_url":"https://api.github.com/repos/solomonxie/solomonxie.github.io/issues/31","id":363006637,"user":{"login":"solomonxie","id":14041622,"avatar_url":"https://avatars2.githubusercontent.com/u/14041622?v=4","gravatar_id":"","url":"https://api.github.com/users/solomonxie","html_url":"https://github.com/solomonxie","followers_url":"https://api.github.com/users/solomonxie/followers","following_url":"https://api.github.com/users/solomonxie/following{/other_user}","gists_url":"https://api.github.com/users/solomonxie/gists{/gist_id}","starred_url":"https://api.github.com/users/solomonxie/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/solomonxie/subscriptions","organizations_url":"https://api.github.com/users/solomonxie/orgs","repos_url":"https://api.github.com/users/solomonxie/repos","events_url":"https://api.github.com/users/solomonxie/events{/privacy}","received_events_url":"https://api.github.com/users/solomonxie/received_events","type":"User","site_admin":false},"created_at":"2018-02-05T07:54:45Z","updated_at":"2018-02-05T07:55:01Z","author_association":"OWNER","body":"## 搭建的SS服务开始几天很快然后就经常掉线，速度也变慢\r\n不管是在DigitalOcean还是AWS的Lightsail搭建ss服务，都有这个问题。\r\n都是出现在我将ip绑定到阿里云的域名之后，在想是不是和阿里云的域名有关系。出现掉线的情况后，无论是ip直连还是用域名连，情况都没有改善，所以怀疑是不是只要在阿里云绑定了域名和ip，就会被更严格的监控到使用ss服务，导致经常掉线。"},{"url":"https://api.github.com/repos/solomonxie/solomonxie.github.io/issues/comments/363017695","html_url":"https://github.com/solomonxie/solomonxie.github.io/issues/31#issuecomment-363017695","issue_url":"https://api.github.com/repos/solomonxie/solomonxie.github.io/issues/31","id":363017695,"user":{"login":"solomonxie","id":14041622,"avatar_url":"https://avatars2.githubusercontent.com/u/14041622?v=4","gravatar_id":"","url":"https://api.github.com/users/solomonxie","html_url":"https://github.com/solomonxie","followers_url":"https://api.github.com/users/solomonxie/followers","following_url":"https://api.github.com/users/solomonxie/following{/other_user}","gists_url":"https://api.github.com/users/solomonxie/gists{/gist_id}","starred_url":"https://api.github.com/users/solomonxie/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/solomonxie/subscriptions","organizations_url":"https://api.github.com/users/solomonxie/orgs","repos_url":"https://api.github.com/users/solomonxie/repos","events_url":"https://api.github.com/users/solomonxie/events{/privacy}","received_events_url":"https://api.github.com/users/solomonxie/received_events","type":"User","site_admin":false},"created_at":"2018-02-05T08:48:46Z","updated_at":"2018-02-05T08:48:46Z","author_association":"OWNER","body":"# AWS各国节点测试\r\n根据[CloudPing](http://www.cloudping.info/)的测试，得出如下结果：\r\n![image](https://user-images.githubusercontent.com/14041622/35795505-50bc8f6c-0a94-11e8-89fa-e8f589be259c.png)\r\n除了加拿大没试过外，其它亲测完全属实，新加坡远快于日本和韩国。"},{"url":"https://api.github.com/repos/solomonxie/solomonxie.github.io/issues/comments/363808264","html_url":"https://github.com/solomonxie/solomonxie.github.io/issues/31#issuecomment-363808264","issue_url":"https://api.github.com/repos/solomonxie/solomonxie.github.io/issues/31","id":363808264,"user":{"login":"solomonxie","id":14041622,"avatar_url":"https://avatars2.githubusercontent.com/u/14041622?v=4","gravatar_id":"","url":"https://api.github.com/users/solomonxie","html_url":"https://github.com/solomonxie","followers_url":"https://api.github.com/users/solomonxie/followers","following_url":"https://api.github.com/users/solomonxie/following{/other_user}","gists_url":"https://api.github.com/users/solomonxie/gists{/gist_id}","starred_url":"https://api.github.com/users/solomonxie/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/solomonxie/subscriptions","organizations_url":"https://api.github.com/users/solomonxie/orgs","repos_url":"https://api.github.com/users/solomonxie/repos","events_url":"https://api.github.com/users/solomonxie/events{/privacy}","received_events_url":"https://api.github.com/users/solomonxie/received_events","type":"User","site_admin":false},"created_at":"2018-02-07T15:39:03Z","updated_at":"2018-02-07T15:39:03Z","author_association":"OWNER","body":"# Shadowsocks开机启动\r\n参考了好几篇文章，怎么说的都有，看起来靠谱的不多。最后挑了一个最简单的方法，生效了。[原文在这里](https://www.zybuluo.com/Hederahelix/note/245179)。\r\n编辑`rc.local`开机启动项：\r\n```\r\nsudo vi /etc/rc.local\r\nssserver -c /etc/shadowsocks.json -d start\r\n```\r\n保存退出，用`sudo reboot`重启，有效。"},{"url":"https://api.github.com/repos/solomonxie/solomonxie.github.io/issues/comments/364436985","html_url":"https://github.com/solomonxie/solomonxie.github.io/issues/31#issuecomment-364436985","issue_url":"https://api.github.com/repos/solomonxie/solomonxie.github.io/issues/31","id":364436985,"user":{"login":"solomonxie","id":14041622,"avatar_url":"https://avatars2.githubusercontent.com/u/14041622?v=4","gravatar_id":"","url":"https://api.github.com/users/solomonxie","html_url":"https://github.com/solomonxie","followers_url":"https://api.github.com/users/solomonxie/followers","following_url":"https://api.github.com/users/solomonxie/following{/other_user}","gists_url":"https://api.github.com/users/solomonxie/gists{/gist_id}","starred_url":"https://api.github.com/users/solomonxie/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/solomonxie/subscriptions","organizations_url":"https://api.github.com/users/solomonxie/orgs","repos_url":"https://api.github.com/users/solomonxie/repos","events_url":"https://api.github.com/users/solomonxie/events{/privacy}","received_events_url":"https://api.github.com/users/solomonxie/received_events","type":"User","site_admin":false},"created_at":"2018-02-09T13:43:47Z","updated_at":"2018-02-09T14:12:35Z","author_association":"OWNER","body":"# 各服务商的各国节点测试（不定期更新）\r\n自从今天发现命令行里可以运行ookla的`speedtest`，就赶快到自己的树莓派、国外租的主机查看连接网速。之前一直用shadowsocks觉得网速慢的时候，总是怀疑有可能节点没选好，一会儿东京，一会儿新加坡，一会儿加拿大，可还是有问题。\r\n\r\n## AWS Lightsail 主机 -- Singapore 节点\r\n下载速度近500M/s，上传速度150M/s，这是什么级别？!\r\n![snip20180209_70](https://user-images.githubusercontent.com/14041622/36030420-1d5b99f0-0de2-11e8-9037-0db28113f53d.png)\r\n\r\n> 在网上看到过一个帖子说得很对，不管怎么测试，还有什么比Youtube 1080P更有说服力呢？\r\n\r\n看到这个，才明白原来服务器本地访问的速度和上传的速度再快，也敌不过传输过程中的丢失。。\r\n另外，我是在本机连接服务器访问youtube的，我本机的测速是15M/s，宽带的带宽是100M。\r\n![image](https://user-images.githubusercontent.com/14041622/36031150-b886ea72-0de4-11e8-8675-781ab022ac76.png)\r\n此时我本机访问bilibili视频的速度比访问youtube快了一倍，如下：\r\n![image](https://user-images.githubusercontent.com/14041622/36031623-4f78fd70-0de6-11e8-8880-1898a79d7d1d.png)\r\n\r\n\r\n\r\n"},{"url":"https://api.github.com/repos/solomonxie/solomonxie.github.io/issues/comments/364451533","html_url":"https://github.com/solomonxie/solomonxie.github.io/issues/31#issuecomment-364451533","issue_url":"https://api.github.com/repos/solomonxie/solomonxie.github.io/issues/31","id":364451533,"user":{"login":"solomonxie","id":14041622,"avatar_url":"https://avatars2.githubusercontent.com/u/14041622?v=4","gravatar_id":"","url":"https://api.github.com/users/solomonxie","html_url":"https://github.com/solomonxie","followers_url":"https://api.github.com/users/solomonxie/followers","following_url":"https://api.github.com/users/solomonxie/following{/other_user}","gists_url":"https://api.github.com/users/solomonxie/gists{/gist_id}","starred_url":"https://api.github.com/users/solomonxie/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/solomonxie/subscriptions","organizations_url":"https://api.github.com/users/solomonxie/orgs","repos_url":"https://api.github.com/users/solomonxie/repos","events_url":"https://api.github.com/users/solomonxie/events{/privacy}","received_events_url":"https://api.github.com/users/solomonxie/received_events","type":"User","site_admin":false},"created_at":"2018-02-09T14:39:32Z","updated_at":"2018-02-09T14:39:32Z","author_association":"OWNER","body":"# `iftop`命令统计服务器网络流量运行情况\r\n[参考文章](https://segmentfault.com/a/1190000002797441)\r\n![image](https://user-images.githubusercontent.com/14041622/36032772-0355e7ba-0dea-11e8-8014-b44463277bff.png)\r\n\r\n"},{"url":"https://api.github.com/repos/solomonxie/solomonxie.github.io/issues/comments/368332006","html_url":"https://github.com/solomonxie/solomonxie.github.io/issues/31#issuecomment-368332006","issue_url":"https://api.github.com/repos/solomonxie/solomonxie.github.io/issues/31","id":368332006,"user":{"login":"solomonxie","id":14041622,"avatar_url":"https://avatars2.githubusercontent.com/u/14041622?v=4","gravatar_id":"","url":"https://api.github.com/users/solomonxie","html_url":"https://github.com/solomonxie","followers_url":"https://api.github.com/users/solomonxie/followers","following_url":"https://api.github.com/users/solomonxie/following{/other_user}","gists_url":"https://api.github.com/users/solomonxie/gists{/gist_id}","starred_url":"https://api.github.com/users/solomonxie/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/solomonxie/subscriptions","organizations_url":"https://api.github.com/users/solomonxie/orgs","repos_url":"https://api.github.com/users/solomonxie/repos","events_url":"https://api.github.com/users/solomonxie/events{/privacy}","received_events_url":"https://api.github.com/users/solomonxie/received_events","type":"User","site_admin":false},"created_at":"2018-02-25T18:26:48Z","updated_at":"2018-02-25T19:12:10Z","author_association":"OWNER","body":"# Shadowsocks命令行中的本地客户端配置\r\n> 有时候想让树莓派访问一些屏蔽的网址，所以只能用命令行的客户端。\r\n\r\n[参考文章](http://www.jeyzhang.com/how-to-install-and-setup-shadowsocks-client-in-different-os.html)\r\n\r\n简单说就是：\r\n```shell\r\nsudo apt-get install m2crypto\r\nsudo pip install shadowsocks\r\n\r\n#启动Shadowsocks\r\nsslocal -s 服务器域名或IP -p 服务器端口号 -k “密码” -l 1080 -t 600 -m rc4-md5 \r\n```\r\n\r\n当然，启动方式还有从配置文件的方法。\r\n首先在某处创建配置文件，比如`~/.shadowsocks-client.json`，内容如下：\r\n```javascript\r\n{\r\n    \"server\":\"服务器IP地址\",\r\n    \"server_port\": 服务器端口,\r\n    \"password\":\"服务器密码\",\r\n    \"local_port\": 1080,\r\n    \"timeout\": 600,\r\n    \"method\":\"aes-256-cfb\"\r\n}\r\n```\r\n然后用这个命令启动：`sslocal -c ~/.shadowsocks-client.json`\r\n\r\n## 启动之后\r\n启动之后，就不要关闭命令，只能打开另一个命令行窗口操作。\r\n现在命令行直接访问网络其实没什么变化，因为目前开启的socks5协议端口，也就是说刚刚设置的本地1080端口是socks5协议的，必须在curl里指定socks5协议，再去访问网络：\r\n```shell\r\ncurl --socks5-hostname 127.0.0.1:1080 httpbin.org/ip\r\n```\r\n不过功能强大能访问socks5协议端口的，估计也就curl了。如果使用别的命令如wget之类的，就只能访问http和https协议端口。\r\n这样的话我们就必须`把socks5端口转换为http端口`。\r\n\r\n## Shadowsocks转换HTTP代理\r\n因为考虑到很多程序都是用http端口为代理出去的，所以我们要把socks5端口映射为某个http端口。\r\n这里就需要用到另一个软件：`polipo`。\r\n[参考文章。](http://baoye.me/2016/10/17/%E5%9F%BA%E4%BA%8E%E6%A0%91%E8%8E%93%E6%B4%BE%E4%BD%BF%E7%94%A8Shadowsocks%E7%BF%BB%E5%A2%99/)\r\n\r\n1. 输入命令安装Polipo:\r\n`sudo apt-get install polipo`\r\n\r\n2. 修改配置文件:\r\n`sudo vim /etc/polipo/config`\r\n\r\n3. 把文件内容全部替换如下：\r\n```shell\r\n# This file only needs to list configuration variables that deviate\r\n# from the default values.  See /usr/share/doc/polipo/examples/config.sample\r\n# and \"polipo -v\" for variables you can tweak and further information.\r\nlogSyslog = false\r\nlogFile = /var/log/polipo/polipo.log\r\nsocksParentProxy = \"127.0.0.1:1080\"\r\nsocksProxyType = socks5\r\nchunkHighMark = 50331648\r\nobjectHighMark = 16384\r\nserverMaxSlots = 64\r\nserverSlots = 16\r\nserverSlots1 = 32\r\nproxyAddress = \"0.0.0.0\"\r\nproxyPort = 1087\r\n```\r\n注意：上面这个`proxyPort = 1087`是要映射出来的http端口，自己随便设置。但是要记住它。\r\n\r\n4. 设置`http_proxy`环境变量\r\n`sudo vim /etc/profile`\r\n写入\r\n`export http_proxy=\"127.0.0.1:1087/\"`\r\n\r\n5. 重启Polipo: `sudo /etc/init.d/polipo restart`\r\n6. 检查效果： `curl -x 127.0.0.1:1087 httpbin.org/ip`\r\n完成！\r\n\r\n## 在Mac中命令行走代理\r\n由于Mac中使用的GUI客户端，所以很多东西都配置好了，在命令行中访问就方便很多。\r\n\r\n[参考文章。](https://github.com/mrdulin/blog/issues/18)\r\n如果是配置的Shadowsocks，那么在GUI启动了shadowsocks的情况下，需要找到正确的本地映射端口。在GUI的设置页面里面可以找到HTTP的映射端口：\r\n![image](https://user-images.githubusercontent.com/14041622/36645118-1e4b0052-1a9f-11e8-84ab-74483827d65f.png)\r\n那么，比如使用curl时，就应当用http如此访问：\r\n`curl -x http://127.0.0.1:1087 httpbin.org/ip`\r\n其它软件也同理，选择http方式的该地址和该端口，就能正确连接了！"}]