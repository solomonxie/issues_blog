[{"url":"https://api.github.com/repos/solomonxie/solomonxie.github.io/issues/comments/360573224","html_url":"https://github.com/solomonxie/solomonxie.github.io/issues/24#issuecomment-360573224","issue_url":"https://api.github.com/repos/solomonxie/solomonxie.github.io/issues/24","id":360573224,"user":{"login":"solomonxie","id":14041622,"avatar_url":"https://avatars2.githubusercontent.com/u/14041622?v=4","gravatar_id":"","url":"https://api.github.com/users/solomonxie","html_url":"https://github.com/solomonxie","followers_url":"https://api.github.com/users/solomonxie/followers","following_url":"https://api.github.com/users/solomonxie/following{/other_user}","gists_url":"https://api.github.com/users/solomonxie/gists{/gist_id}","starred_url":"https://api.github.com/users/solomonxie/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/solomonxie/subscriptions","organizations_url":"https://api.github.com/users/solomonxie/orgs","repos_url":"https://api.github.com/users/solomonxie/repos","events_url":"https://api.github.com/users/solomonxie/events{/privacy}","received_events_url":"https://api.github.com/users/solomonxie/received_events","type":"User","site_admin":false},"created_at":"2018-01-25T19:26:57Z","updated_at":"2018-02-14T10:54:17Z","author_association":"OWNER","body":"# Get System Arguments 获取系统参数\r\n\r\n```python\r\nimport sys\r\n\r\n# 输出文件名\r\nprint sys.argv[0]\r\n\r\n# 输出第一个参数\r\nsys.argv[1]\r\n```"},{"url":"https://api.github.com/repos/solomonxie/solomonxie.github.io/issues/comments/360573276","html_url":"https://github.com/solomonxie/solomonxie.github.io/issues/24#issuecomment-360573276","issue_url":"https://api.github.com/repos/solomonxie/solomonxie.github.io/issues/24","id":360573276,"user":{"login":"solomonxie","id":14041622,"avatar_url":"https://avatars2.githubusercontent.com/u/14041622?v=4","gravatar_id":"","url":"https://api.github.com/users/solomonxie","html_url":"https://github.com/solomonxie","followers_url":"https://api.github.com/users/solomonxie/followers","following_url":"https://api.github.com/users/solomonxie/following{/other_user}","gists_url":"https://api.github.com/users/solomonxie/gists{/gist_id}","starred_url":"https://api.github.com/users/solomonxie/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/solomonxie/subscriptions","organizations_url":"https://api.github.com/users/solomonxie/orgs","repos_url":"https://api.github.com/users/solomonxie/repos","events_url":"https://api.github.com/users/solomonxie/events{/privacy}","received_events_url":"https://api.github.com/users/solomonxie/received_events","type":"User","site_admin":false},"created_at":"2018-01-25T19:27:10Z","updated_at":"2018-02-05T07:03:07Z","author_association":"OWNER","body":"# Define a class 定义类\r\n\r\n```\r\nclass Person():\r\n    self.name = ''\r\n    self.id = 0\r\n    self.father = 1\r\n    self.mother = 2 \r\n\r\n    def __init__(self, name):\r\n        self.name = name\r\n\tself.born()\r\n    \r\n    def born(self):\r\n        self.id = self.father + self.mother\r\n\r\nme = Person('Solomon')\r\nprint me.id\r\n```"},{"url":"https://api.github.com/repos/solomonxie/solomonxie.github.io/issues/comments/360580633","html_url":"https://github.com/solomonxie/solomonxie.github.io/issues/24#issuecomment-360580633","issue_url":"https://api.github.com/repos/solomonxie/solomonxie.github.io/issues/24","id":360580633,"user":{"login":"solomonxie","id":14041622,"avatar_url":"https://avatars2.githubusercontent.com/u/14041622?v=4","gravatar_id":"","url":"https://api.github.com/users/solomonxie","html_url":"https://github.com/solomonxie","followers_url":"https://api.github.com/users/solomonxie/followers","following_url":"https://api.github.com/users/solomonxie/following{/other_user}","gists_url":"https://api.github.com/users/solomonxie/gists{/gist_id}","starred_url":"https://api.github.com/users/solomonxie/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/solomonxie/subscriptions","organizations_url":"https://api.github.com/users/solomonxie/orgs","repos_url":"https://api.github.com/users/solomonxie/repos","events_url":"https://api.github.com/users/solomonxie/events{/privacy}","received_events_url":"https://api.github.com/users/solomonxie/received_events","type":"User","site_admin":false},"created_at":"2018-01-25T19:52:10Z","updated_at":"2018-01-25T19:52:10Z","author_association":"OWNER","body":"# FLask 初接触\r\n> Flask是基于Python的Web后台服务器框架，相对于Django来讲属于非常灵巧的轻量级框架。目前市面上应用程度很广，值得学习一下。\r\n\r\n## Installation\r\n\r\n- Windows Git Bash\r\n\r\n```\r\npip install virtualenv\r\nmkdir /d/workspace/myFlask\r\ncd /d/workspace/myFlask\r\n\r\nvirtualenv --no-site-packages venv\r\nsource venv/Scripts/activate\r\n# Now is already in virtual enviroment\r\n\r\npip install Flask\r\n```\r\n\r\n- Windows CMD\r\n\r\n```\r\n# 其他都一样 只有运行不同\r\nvenv\\Scripts\\activate\r\n```\r\n\r\n## Deployment\r\n\r\n```\r\ntouch hello.py\r\nmkdir static\r\nmkdir templates\r\n```\r\n\r\n## Hello World\r\n\r\n在hello.py中输入以下内容并保存(最简单Flask)\r\n\r\n```\r\nfrom flask import Flask\r\napp = Flask(__name__)\r\n\r\n@app.route('/')\r\ndef hello_world():\r\n    return 'Hello World!'\r\n\r\n    if __name__ == '__main__':\r\n        app.run(debug=True)\r\n```\r\n\r\n## 运行\r\n\r\n```\r\npython hello.py\r\n```\r\n\r\n## 渲染模板\r\n\r\n在`template`文件夹中新建模板users.html，并随便写几句话，在hello.py中加入如下语句：\r\n\r\n```\r\n#记住在前面需要引用渲染函数\r\nfrom flask import render_template\r\n\r\n@app.route('/users/')\r\ndef show_users():\r\n    return render_template('users.html') \r\n```\r\n\r\n"},{"url":"https://api.github.com/repos/solomonxie/solomonxie.github.io/issues/comments/362521940","html_url":"https://github.com/solomonxie/solomonxie.github.io/issues/24#issuecomment-362521940","issue_url":"https://api.github.com/repos/solomonxie/solomonxie.github.io/issues/24","id":362521940,"user":{"login":"solomonxie","id":14041622,"avatar_url":"https://avatars2.githubusercontent.com/u/14041622?v=4","gravatar_id":"","url":"https://api.github.com/users/solomonxie","html_url":"https://github.com/solomonxie","followers_url":"https://api.github.com/users/solomonxie/followers","following_url":"https://api.github.com/users/solomonxie/following{/other_user}","gists_url":"https://api.github.com/users/solomonxie/gists{/gist_id}","starred_url":"https://api.github.com/users/solomonxie/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/solomonxie/subscriptions","organizations_url":"https://api.github.com/users/solomonxie/orgs","repos_url":"https://api.github.com/users/solomonxie/repos","events_url":"https://api.github.com/users/solomonxie/events{/privacy}","received_events_url":"https://api.github.com/users/solomonxie/received_events","type":"User","site_admin":false},"created_at":"2018-02-02T08:42:05Z","updated_at":"2018-02-05T07:02:54Z","author_association":"OWNER","body":"# python 获取当前路径\r\n需要`import os`\r\n- 当前所在文件夹: `os.getcwd()`\r\n- 当前文件名：`__file__`\r\n- 当前文件路径: `os.path.join( os.getcwd(), __file__ )`"},{"url":"https://api.github.com/repos/solomonxie/solomonxie.github.io/issues/comments/362527027","html_url":"https://github.com/solomonxie/solomonxie.github.io/issues/24#issuecomment-362527027","issue_url":"https://api.github.com/repos/solomonxie/solomonxie.github.io/issues/24","id":362527027,"user":{"login":"solomonxie","id":14041622,"avatar_url":"https://avatars2.githubusercontent.com/u/14041622?v=4","gravatar_id":"","url":"https://api.github.com/users/solomonxie","html_url":"https://github.com/solomonxie","followers_url":"https://api.github.com/users/solomonxie/followers","following_url":"https://api.github.com/users/solomonxie/following{/other_user}","gists_url":"https://api.github.com/users/solomonxie/gists{/gist_id}","starred_url":"https://api.github.com/users/solomonxie/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/solomonxie/subscriptions","organizations_url":"https://api.github.com/users/solomonxie/orgs","repos_url":"https://api.github.com/users/solomonxie/repos","events_url":"https://api.github.com/users/solomonxie/events{/privacy}","received_events_url":"https://api.github.com/users/solomonxie/received_events","type":"User","site_admin":false},"created_at":"2018-02-02T09:03:44Z","updated_at":"2018-02-12T13:16:43Z","author_association":"OWNER","body":"# python调用命令行\r\n参考[这篇文章](https://www.jianshu.com/p/5d999a668e79)\r\n\r\n```python\r\nimport os\r\n\r\n#只返回结果\r\nos.system(command)\r\n\r\n#返回结果与终端显示信息\r\nwith os.popen(command, mode) as f: \r\n    print f.read()\r\n\r\n```"},{"url":"https://api.github.com/repos/solomonxie/solomonxie.github.io/issues/comments/362997312","html_url":"https://github.com/solomonxie/solomonxie.github.io/issues/24#issuecomment-362997312","issue_url":"https://api.github.com/repos/solomonxie/solomonxie.github.io/issues/24","id":362997312,"user":{"login":"solomonxie","id":14041622,"avatar_url":"https://avatars2.githubusercontent.com/u/14041622?v=4","gravatar_id":"","url":"https://api.github.com/users/solomonxie","html_url":"https://github.com/solomonxie","followers_url":"https://api.github.com/users/solomonxie/followers","following_url":"https://api.github.com/users/solomonxie/following{/other_user}","gists_url":"https://api.github.com/users/solomonxie/gists{/gist_id}","starred_url":"https://api.github.com/users/solomonxie/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/solomonxie/subscriptions","organizations_url":"https://api.github.com/users/solomonxie/orgs","repos_url":"https://api.github.com/users/solomonxie/repos","events_url":"https://api.github.com/users/solomonxie/events{/privacy}","received_events_url":"https://api.github.com/users/solomonxie/received_events","type":"User","site_admin":false},"created_at":"2018-02-05T06:58:20Z","updated_at":"2018-02-05T06:58:20Z","author_association":"OWNER","body":"# Python代码之美\r\n> 有时特别想摘抄一些别人漂亮的代码书写。在这里贴上吧。\r\n\r\n### `gh-issues-import.py`\r\n代码整齐和常量名全大写\r\n![image](https://user-images.githubusercontent.com/14041622/35791554-9d0f75d4-0a83-11e8-8110-cfd227a4f198.png)\r\n分隔有序，不用注释也可以清晰表面之间分别\r\n![image](https://user-images.githubusercontent.com/14041622/35791749-7734bc38-0a84-11e8-9143-5db51fa864c4.png)\r\n简单函数和复杂函数的断行方式\r\n![image](https://user-images.githubusercontent.com/14041622/35791839-dab7cb1a-0a84-11e8-9601-d6e18c8b6871.png)\r\n"},{"url":"https://api.github.com/repos/solomonxie/solomonxie.github.io/issues/comments/363431600","html_url":"https://github.com/solomonxie/solomonxie.github.io/issues/24#issuecomment-363431600","issue_url":"https://api.github.com/repos/solomonxie/solomonxie.github.io/issues/24","id":363431600,"user":{"login":"solomonxie","id":14041622,"avatar_url":"https://avatars2.githubusercontent.com/u/14041622?v=4","gravatar_id":"","url":"https://api.github.com/users/solomonxie","html_url":"https://github.com/solomonxie","followers_url":"https://api.github.com/users/solomonxie/followers","following_url":"https://api.github.com/users/solomonxie/following{/other_user}","gists_url":"https://api.github.com/users/solomonxie/gists{/gist_id}","starred_url":"https://api.github.com/users/solomonxie/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/solomonxie/subscriptions","organizations_url":"https://api.github.com/users/solomonxie/orgs","repos_url":"https://api.github.com/users/solomonxie/repos","events_url":"https://api.github.com/users/solomonxie/events{/privacy}","received_events_url":"https://api.github.com/users/solomonxie/received_events","type":"User","site_admin":false},"created_at":"2018-02-06T14:05:09Z","updated_at":"2018-02-06T14:05:09Z","author_association":"OWNER","body":"# Python 读取JSON数据\r\n\r\n```python\r\nimport json\r\n\r\nhim = json.loads( '{\"title\": \"Jason\", \"content\": \"hello\"}' )\r\n\r\nprint( him['title'] )\r\n```\r\nOut:\r\n```\r\nJason\r\n```"},{"url":"https://api.github.com/repos/solomonxie/solomonxie.github.io/issues/comments/363449743","html_url":"https://github.com/solomonxie/solomonxie.github.io/issues/24#issuecomment-363449743","issue_url":"https://api.github.com/repos/solomonxie/solomonxie.github.io/issues/24","id":363449743,"user":{"login":"solomonxie","id":14041622,"avatar_url":"https://avatars2.githubusercontent.com/u/14041622?v=4","gravatar_id":"","url":"https://api.github.com/users/solomonxie","html_url":"https://github.com/solomonxie","followers_url":"https://api.github.com/users/solomonxie/followers","following_url":"https://api.github.com/users/solomonxie/following{/other_user}","gists_url":"https://api.github.com/users/solomonxie/gists{/gist_id}","starred_url":"https://api.github.com/users/solomonxie/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/solomonxie/subscriptions","organizations_url":"https://api.github.com/users/solomonxie/orgs","repos_url":"https://api.github.com/users/solomonxie/repos","events_url":"https://api.github.com/users/solomonxie/events{/privacy}","received_events_url":"https://api.github.com/users/solomonxie/received_events","type":"User","site_admin":false},"created_at":"2018-02-06T15:04:40Z","updated_at":"2018-02-06T15:04:40Z","author_association":"OWNER","body":"# Python中文解决方案 （简易）\r\n翻了翻几年前研究Python中文编码的问题，原来如此复杂。。。。一时间全忘了。\r\n为了避开这个理论上的难题，我直接开启了实验出真知的模式，试验出一个简单的方法。\r\n简单来说如下：\r\n1. 首先页头要有`# -*- coding: utf-8 -*-`的声明\r\n2. 整个py文件中，只要任何一处设计字符串，都要认真处理\r\n3. 所有获得的字符串，都要先进行`\"字符串\".decode('utf-8)`解码为某种原始编码。\r\n4. 所有要发出的或写入文件的，都必须要进行`\"字符串\".encode('utf-8')`编码为统一码。"},{"url":"https://api.github.com/repos/solomonxie/solomonxie.github.io/issues/comments/363699464","html_url":"https://github.com/solomonxie/solomonxie.github.io/issues/24#issuecomment-363699464","issue_url":"https://api.github.com/repos/solomonxie/solomonxie.github.io/issues/24","id":363699464,"user":{"login":"solomonxie","id":14041622,"avatar_url":"https://avatars2.githubusercontent.com/u/14041622?v=4","gravatar_id":"","url":"https://api.github.com/users/solomonxie","html_url":"https://github.com/solomonxie","followers_url":"https://api.github.com/users/solomonxie/followers","following_url":"https://api.github.com/users/solomonxie/following{/other_user}","gists_url":"https://api.github.com/users/solomonxie/gists{/gist_id}","starred_url":"https://api.github.com/users/solomonxie/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/solomonxie/subscriptions","organizations_url":"https://api.github.com/users/solomonxie/orgs","repos_url":"https://api.github.com/users/solomonxie/repos","events_url":"https://api.github.com/users/solomonxie/events{/privacy}","received_events_url":"https://api.github.com/users/solomonxie/received_events","type":"User","site_admin":false},"created_at":"2018-02-07T08:52:37Z","updated_at":"2018-02-07T12:53:31Z","author_association":"OWNER","body":"# 为什么是IPython?\r\npython里面调试确实有点烦恼，尤其是在vim里，想要尝试一些简单的编码问题，实在是有点麻烦，不想到命令行模式一行一行执行，也不想再新建一个文件测试一个简单的功能。\r\n而且就是不管这些，测试一个简单的功能如学习语法、测试编码、测试新学习的包等，在IDE里面测试，看不到每个部分的output效果（除非自己手动去命令行里复制或截屏），在命令行里测试，则没法轻松撤销前面的代码。。。。\r\n所以这时候才想到好像前阵子看到youtube视频里别人用IPython，是那种又能轻松编辑又能为每部分显示output效果，还能在旁做markdown笔记的东西。\r\n出于这个想法，搜到了这篇[知乎回答](https://www.zhihu.com/question/51467397)，看到了不少有意思的东西，感觉又展开了一个崭新的领域，python的视界豁然开朗。\r\n[这篇文章](https://zhuanlan.zhihu.com/p/33654849)极好的解释了IPython的入门用法，相当酷！我怎么竟然这么久都不知道这种东西的存在？\r\n\r\n### IPython和Jupyter的区别？\r\n据说一开始IPython是作为`IPython shell`的存在，后来Jupyter融合了它，又把自己和IPython上独立出来，做成了网页版的`Jupyter Notebook`这样的东西。Jupyter强大的特性，加上和各种数据研究库的紧密结合，真让人不能忽视它的存在了。\r\nIPython的安装方法，简单地`pip install ipython`即可。\r\n但是，想到IPython本身一个shell，让我想起了我自己用的shell是`zsh`，让我把zsh切换到别的shell里面去，还真有点不喜欢。。这可能是个stylish issue吧。\r\n所以，应该直接了当的安装jupyter，其中也会自动安装上`IPython shell`，作为其运行的Kernel。\r\n\r\n## 安装Jupyter\r\n只安装Jupyter本身的话，超简单：`pip install jupyter`。\r\n不过根据官方文档，强烈建议安装Jupyter的`Anaconda`发行版，像大礼包一样的自动安装`python+Jupyter Notebook+一系列数据研究库`。\r\n因为本来就是要研究机器学习等一系列数据研究的，所以Anaconda正合适。\r\n这个我觉得再好不过了，所以直接跳到[`Anaconda`页面](https://www.anaconda.com/download)去看安装方法。\r\n然后看到，Anaconda安装方法是不能简单`apt-get`或`brew`或`pip install`的，500M左右的大小，需要下载后启动图形安装工具或shell脚本安装（`.sh`文件本身就500M，而且安装分为Python 3和Python 2的两种方式。\r\n![image](https://user-images.githubusercontent.com/14041622/35910000-25554b14-0c30-11e8-9102-3c61460c3b39.png)\r\n\r\n## 启动Jupyter\r\n安装好Anaconda后，就可以通过GUI应用启动了。但是这种方式不推荐，软件体积太大，而且还存在一些学习成本，麻烦。界面如下图：\r\n![image](https://user-images.githubusercontent.com/14041622/35916826-b5514c48-0c46-11e8-9839-cf4ed9f333f4.png)\r\n\r\n感觉用命令行启动更简单，在某个工作目录，输入：\r\n```\r\njupyter notebook\r\n```\r\n这样就能以这个目录打开一个`http://localhost:8889/tree`的网页，一切都在这个网页里操作。\r\n\r\n### iTerm2无法在命令行里启动Jupyter\r\n总是报`command not found jupyter`错误，说没有这个命令。一开始还以为是zsh的问题，可是切换到bash也一样。\r\n照着网上攻略在`.zshrc`里改也没用，在`.bash_profile`里改也没用。\r\n然后发现，在Mac自带的Terminal.app中就可以正常打开，不需要改任何配置。\r\n这才知道原来是iTerm2无法识别。于是在Terminal.app中用`which`命令查看jupyter命令的所在处，看到它位于`/Users/我的用户名/anaconda2/bin/jupyter`这个地方。\r\n于是直接在`~/.zshrc`中加入alias：\r\n```\r\nalias jupyter=\"/Users/我的用户名/anaconda2/bin/jupyter\"\r\n```\r\n重启iTerm2，好用！\r\n\r\n但是，iTerm2中的bash还是不能访问，用同样的方法也不行。暂时没找到解决方法。\r\n"},{"url":"https://api.github.com/repos/solomonxie/solomonxie.github.io/issues/comments/363737263","html_url":"https://github.com/solomonxie/solomonxie.github.io/issues/24#issuecomment-363737263","issue_url":"https://api.github.com/repos/solomonxie/solomonxie.github.io/issues/24","id":363737263,"user":{"login":"solomonxie","id":14041622,"avatar_url":"https://avatars2.githubusercontent.com/u/14041622?v=4","gravatar_id":"","url":"https://api.github.com/users/solomonxie","html_url":"https://github.com/solomonxie","followers_url":"https://api.github.com/users/solomonxie/followers","following_url":"https://api.github.com/users/solomonxie/following{/other_user}","gists_url":"https://api.github.com/users/solomonxie/gists{/gist_id}","starred_url":"https://api.github.com/users/solomonxie/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/solomonxie/subscriptions","organizations_url":"https://api.github.com/users/solomonxie/orgs","repos_url":"https://api.github.com/users/solomonxie/repos","events_url":"https://api.github.com/users/solomonxie/events{/privacy}","received_events_url":"https://api.github.com/users/solomonxie/received_events","type":"User","site_admin":false},"created_at":"2018-02-07T11:13:23Z","updated_at":"2018-02-08T02:50:28Z","author_association":"OWNER","body":"# Python `requests`库抓取网页出现乱码\r\n> 练习抓取网页时遇到的，如果是简书等这些标准网站，正常抓取是没问题的。但是很多网页竟然怎么抓取都是所有中文都乱码。弄的我还以为是python代码本身的encoding问题。最后才追溯到原来是出现在源头requests库里面。\r\n\r\n参考这两篇文章，[requests官方文档](http://docs.python-requests.org/zh_CN/latest/user/quickstart.html)， 和，[代码分析Python requests库中文编码问题](http://xiaorui.cc/2016/02/19/%E4%BB%A3%E7%A0%81%E5%88%86%E6%9E%90python-requests%E5%BA%93%E4%B8%AD%E6%96%87%E7%BC%96%E7%A0%81%E9%97%AE%E9%A2%98/)，非常有参考性。\r\n\r\n第二篇文章中看到，很多网页实际上并不都是`utf-8`的编码格式，还有很多是`ISO-8859-1`格式，如下图：\r\n![image](https://user-images.githubusercontent.com/14041622/35913040-5fb39cc6-0c39-11e8-9cee-8dc8e7961918.png)\r\n但是，其实不是网页本身的问题！我们查看网页本身的`headers`发现，他们的`charset`值是`utf-8`，但是为什么用`r.encoding()`得到的却是`ISO-8859-1`呢？文章中指出原来是requests的bug，而且常年不解决。所以就需要我们自己来想办法。\r\n我们不能手动去检查每一个网页的编码啊，那样太麻烦了。\r\n官方文档中出现了这么一小句话，非常重要，亲测有效：\r\n![image](https://user-images.githubusercontent.com/14041622/35913251-0508ce9e-0c3a-11e8-8f76-188c026436ca.png)\r\n虽然这句话不是为了处理网页的，但是`二进制`！沿着这个思路，又在官网看怎么将网页获取为二进制模式的：\r\n![image](https://user-images.githubusercontent.com/14041622/35913331-3c097b96-0c3a-11e8-8bed-5a872e457116.png)\r\n就是使用`r.content`获取。\r\n"},{"url":"https://api.github.com/repos/solomonxie/solomonxie.github.io/issues/comments/363828201","html_url":"https://github.com/solomonxie/solomonxie.github.io/issues/24#issuecomment-363828201","issue_url":"https://api.github.com/repos/solomonxie/solomonxie.github.io/issues/24","id":363828201,"user":{"login":"solomonxie","id":14041622,"avatar_url":"https://avatars2.githubusercontent.com/u/14041622?v=4","gravatar_id":"","url":"https://api.github.com/users/solomonxie","html_url":"https://github.com/solomonxie","followers_url":"https://api.github.com/users/solomonxie/followers","following_url":"https://api.github.com/users/solomonxie/following{/other_user}","gists_url":"https://api.github.com/users/solomonxie/gists{/gist_id}","starred_url":"https://api.github.com/users/solomonxie/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/solomonxie/subscriptions","organizations_url":"https://api.github.com/users/solomonxie/orgs","repos_url":"https://api.github.com/users/solomonxie/repos","events_url":"https://api.github.com/users/solomonxie/events{/privacy}","received_events_url":"https://api.github.com/users/solomonxie/received_events","type":"User","site_admin":false},"created_at":"2018-02-07T16:35:31Z","updated_at":"2018-02-08T07:03:26Z","author_association":"OWNER","body":"# 关于解决Python乱码问题的终极解决方案 (TL;DR)\r\n![image](https://user-images.githubusercontent.com/14041622/35929949-a242afbe-0c6b-11e8-8848-508c4e8124d1.png)\r\n\r\n> 有个特别好玩的现象，当我们为了python编码头疼的时候，几乎搜索到所有的文章都会先发一通牢骚。然后在无可奈何地写解决思路（是解决思路不是方案）。这个问题真不是新手问题，即使是十几年python老手也经常头疼。中国外国都一样。看看这个python专家在[PyCon大会上用半个多小时讲解乱码的视频](https://www.youtube.com/watch?time_continue=1040&v=sgHbC6udIqc)就了解了，他自己都给自己的来回encoding, decoding, encoding, decoding说晕了，台下举手他都拒绝回答，可想而知这个问题复杂性。\r\n\r\n我认为，几乎每个pythoner，都会有一段人生浪费在了编码上。可以说这个问题，是如果你不彻彻底底解决，就永远会崩溃的地步。翻看我曾经写的数篇文章就知道了：\r\n- [对Python 2.x的通宵抱怨](https://github.com/solomonxie/solomonxie.github.io/issues/9)\r\n- [Python中文字符的理解：str()、repr()、print ](https://github.com/solomonxie/solomonxie.github.io/issues/10)\r\n- [Python里中文编码的理解：unicode、utf-8、gbk](https://github.com/solomonxie/solomonxie.github.io/issues/20)\r\n\r\n牢骚结束，下面是我又一次用了两个整天才测试整理书写完成的ipython notebook笔记。`ipynb`格式的笔记源文件在这里，当然有可能会链接失效，有喜欢ipython的live coding笔记的且想要用这个笔记测试编码的，请联系我。\r\n\r\n### 首先，需要先要了解python的`print大法`\r\n如果python的print的特性都没有了解的话，希望你不要贸然尝试用print去调试测试乱码编码的问题。\r\n这里的print厉害到让你不高兴的地步——它不管你塞过来的是什么格式什么编码，字符串数组对象什么的的都一口气全打印出来。\r\n感觉好像很好，但其实是我们仔细研究编码问题的最大阻碍。\r\n因为你塞给print一个unicode它能打出中文，塞一个utf-8或iso8895给它，也一样给你打印出原文。这样以来，你看着它出现原文后，就欣喜若狂产生了一种胜利的错觉。\r\n所以我想在这里最先说清楚它：\r\n#### 不要轻易在研究乱码的时候用print测试目标！\r\n也不是说这种时候一点都不能用，而是说你可以print别的什么东西，但是如果想看清某个变量本质的话，千万不要用。\r\n这个时候要用`print repr(字符串)` ,或者最好是在命令行或ipython里面测试，像这样：\r\n![image](https://user-images.githubusercontent.com/14041622/35959122-2d49108a-0cdf-11e8-8a92-66872afc4782.png)\r\n\r\n看出区别了吗？明确了这点，再来继续研究编码问题。\r\n\r\n### 简单来说，先要记住，在Python2里字符串只有两大阵营：\r\n\r\n## `unicode`和`str`\r\n\r\n如果`type(字符串)`显示结果是`str`，其实指的是`bytes`字节码。\r\n而其它各种我们所说的`utf-8`，`gb2312`等等也都是Unicode的不同实现方式。\r\n这里不要去考虑那么复杂，只要先记住这两大阵营就行。\r\n\r\n## `encoding`和`decoding`\r\n\r\n绝对要记住的：\r\n从`unicode`转换到`str`，这个叫`encoding`，编码。\r\n从`str`转换到`unicode`，这个叫`decoding`，解码。\r\n![image](https://user-images.githubusercontent.com/14041622/35937299-c7e99858-0c80-11e8-8c0d-aedfb723a2c1.png)\r\n(图片引用自知乎相关某答案。)\r\n\r\n来回记住这个问题，才能进入下一步！\r\n\r\n然后来看个案例。\r\n![image](https://user-images.githubusercontent.com/14041622/35928287-ca30e972-0c67-11e8-96d1-7d3a05e26e43.png)\r\n\r\n> 通过上面两种格式的对比我们看到，str和unicode的各种区别。\r\n\r\n那么，既然变量里面会出现两种不同的格式，如果我们把两种格式的字符串连在一起操作会发生什么呢？\r\n如下：\r\n![image](https://user-images.githubusercontent.com/14041622/35928324-dddbf200-0c67-11e8-96db-31061e6848eb.png)\r\n\r\n### 看！著名的编码错误`UnicodeDecodeError: 'ascii' codec can't decode`就这样出现了！\r\n\r\n以上是我们用`显性`字符串来比较两种格式字符串的区别。\r\n\r\n但是，我们经常性处理python编码问题，都不是在这种`显性`的字符串上出现的，不是从网上爬取的就是从本地文件读取的，意思就是文件内容庞大，编码格式很难猜到是什么。\r\n所以这里我们将问题再拆分为两部分讨论：本地文件和网络资源。\r\n\r\n## 本地文件编码测试\r\n首先在本地建立一个有中文的以`utf-8`格式保存的文本文件（实际上无论.txt还是.md等都无所谓，内容是一样的）。\r\n内容只有'你好'。\r\n\r\n### 然后我们来读取一下：\r\n![image](https://user-images.githubusercontent.com/14041622/35928363-f0ffdb44-0c67-11e8-9b37-1cf8ebcb5ec0.png)\r\n\r\n> 上面看到，从文件读取出来的，就是str格式的字符串。\r\n那么如果要把str转化为unicode，就要解码，也就是decoding.\r\n\r\n![image](https://user-images.githubusercontent.com/14041622/35928391-017b7d0c-0c68-11e8-8a73-eed6d071fc56.png)\r\n\r\n### 这种时候实际上是最迷糊也最容易造成之后错误的，就是分不清该编码还是该解码。\r\n\r\n> 所以上面提到，必须要记住这两个区别。\r\n那么如果现在我搞反了怎么办？就会再次出现下面错误：\r\n\r\n![image](https://user-images.githubusercontent.com/14041622/35928408-10b50180-0c68-11e8-8a41-9d4d97a3be66.png)\r\n\r\n### 话说回来，我们该怎么统一他们呢？\r\n> 为了避免两种格式的字符串在一起乱搞，统一他们是必须的。但是以哪一种为统一的呢，unicode还是bytes?\r\n\r\n网上各种文章统一口径，要求代码中出现所有的变量都统一为unicode。\r\n可是我在实践和测试中都越来越发现：这种做法真的不那么可靠，甚至我怀疑有可能我们碰到那么多的问题，都是由它搅乱引起的。\r\n\r\n#### 下面我们来看看做常用的环境下字符串都是什么格式\r\n\r\n![image](https://user-images.githubusercontent.com/14041622/35928691-b8c8ea1c-0c68-11e8-952d-97c8c205ae79.png)\r\n\r\n> 这样就明白了：除了r.text返回的内容外，其它几乎都是使用str格式，也就是bytes字节码码。所以我们只要转化requests相关的内容就行！\r\n\r\n实际上，requests返回的response中, 除了用`.text`获取内容，我们还可以用`.content`获取同样的内容，只不过是bytes格式。\r\n\r\n那就正和我们意，不用再去转化每一个地方的字符串，而只要盯紧这一个地方就足够了。\r\n\r\n### 为什么我们不能把所有字符串变量统一为unicode呢？\r\n\r\n先提醒下，变成unicode的过程，叫`decoding`。不要记错。\r\n像`.text`经常把`ISO8859`等猜不到也检测不到编码(机率很低)的字符串扔过来，如果遇到的话，是很麻烦的。\r\n`decoding`有两种方法：\r\n```\r\nunicode(b'你好‘）\r\nb'你好'.decode('utf-8')\r\n```\r\n\r\n这里因为不知道来源的编码，所以必须用`unicode()`来解码，而不能用`.decode('utf-8')`，因为显然你不能乱写解码名称，如果来源果真是（很大几率是）`ISO8859`等方式，那么错误的解码肯定会产生乱码，或者直接程序报错。切记！\r\n\r\n所以这里只能用`unicode()`解码。如下例：\r\n\r\n![image](https://user-images.githubusercontent.com/14041622/35928475-387899f2-0c68-11e8-9821-3f31939c7742.png)\r\n\r\n##  结论：一定记住，全文都统一用`str`格式字符串\r\n### 只要盯紧requests、json等这种经常处理外来资源的库就好了。\r\n只要控制好外来源的字符串，统一为`str`，其它一切都好说！\r\n\r\n> 实际上，我发现遇到的绝大多数编码问题，实际上不是python原生方法导致的，而是这些外来库所引起的！因为每个模块都会有自己的一套处理编码的方式，你还真不知道它是采用哪个。就像JSON的dumps()一样埋着大坑等着我们。所以真正应该盯紧的就是这些库了。\r\n\r\n\r\n下面是一个从获取网络资源（含中文且被requests认为编码是ISO8850的网页）到本地操作且存储到本地文件的完整测试。\r\n```python\r\nimport requests\r\n\r\nr = requests.get('http://pycoders-weekly-chinese.readthedocs.io/en/latest/issue5/unipain.html')\r\n\r\n# write a webpage to local file\r\nwith open('test.html', 'w') as f:\r\n    f.write( r.content )\r\n\r\n# read from a local html file\r\nwith open('test.html', 'r') as f:\r\n    ss = f.read()\r\n```\r\n大功告成！效果如下：\r\n\r\n![image](https://user-images.githubusercontent.com/14041622/35929410-69cf7e42-0c6a-11e8-915d-f020a729bbb4.png)\r\n\r\n### 再也不用纠结、检查每一个变量、写一大堆嵌套转化方法了！注意，只要盯紧各种外来模块和库的文字处理就够了。\r\n\r\n> 另外，关于JSON的乱码问题，又是一个新的较长篇章。我会单分一篇，请到我的专栏里找。"},{"url":"https://api.github.com/repos/solomonxie/solomonxie.github.io/issues/comments/364014435","html_url":"https://github.com/solomonxie/solomonxie.github.io/issues/24#issuecomment-364014435","issue_url":"https://api.github.com/repos/solomonxie/solomonxie.github.io/issues/24","id":364014435,"user":{"login":"solomonxie","id":14041622,"avatar_url":"https://avatars2.githubusercontent.com/u/14041622?v=4","gravatar_id":"","url":"https://api.github.com/users/solomonxie","html_url":"https://github.com/solomonxie","followers_url":"https://api.github.com/users/solomonxie/followers","following_url":"https://api.github.com/users/solomonxie/following{/other_user}","gists_url":"https://api.github.com/users/solomonxie/gists{/gist_id}","starred_url":"https://api.github.com/users/solomonxie/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/solomonxie/subscriptions","organizations_url":"https://api.github.com/users/solomonxie/orgs","repos_url":"https://api.github.com/users/solomonxie/repos","events_url":"https://api.github.com/users/solomonxie/events{/privacy}","received_events_url":"https://api.github.com/users/solomonxie/received_events","type":"User","site_admin":false},"created_at":"2018-02-08T06:21:46Z","updated_at":"2018-02-08T06:22:51Z","author_association":"OWNER","body":"# Python操作JSON出现乱码的解决方案\r\n> 其实刚刚写过一整篇Python编码问题的解决方案，由于JSON又是一种特殊案例（与库相关，与语言本身无关）所以就单独提出来说。\r\n\r\n\r\n## 我们来看一个从网上获取json并又存到本地文件的例子\r\n```python\r\nimport requests,json\r\n\r\nr = requests.get('https://api.github.com/repos/solomonxie/\\\r\nsolomonxie.github.io/issues/25/comments')\r\n\r\n# 获取到我的github中某条issue的所有评论，形式为<JSON格式的字符串>\r\ncomments = json.loads( r.content )\r\n\r\n# 取某一条评论查看内容（中文）\r\ncc = comments[0]['body'][0:10] # 取出的内容是'## 配置：先从配置'\r\n```\r\n然后来测试下变量cc：\r\n![image](https://user-images.githubusercontent.com/14041622/35958210-88aad5ee-0cda-11e8-8192-08a8da696a31.png)\r\n\r\n### 好，到这里先停一下！\r\nJSON的读取到目前为止，都是正常的：JSON Object对象给出的值都是unicode，没有被莫名转义，也没有报错误。\r\n> 但是，unicode格式，意味着它和str格式不兼容！\r\n这时，害羞的大姑娘Unicode刚出炉，你不能在这个时候让它和Str操作在一起！\r\n报错也往往就在这种疏于防备的时候！\r\n\r\n比如你看：\r\n\r\n![image](https://user-images.githubusercontent.com/14041622/35958360-59681c8c-0cdb-11e8-9a83-c825e4a9eb8b.png)\r\n\r\n上面打印了三条Unicode和Str的结合，\r\n前两条分别是以Str格式的结合，以Unicode格式的结合。\r\n但是第三条，把两个不同格式的字符串结合，就出错了。\r\n\r\n对不起，这里不是Javascript，变量不可以任意交合。Python对变量和编码都是极其谨慎的。\r\n\r\n所以明白了这点，我们再继续。\r\n\r\n### 上面获得了JSON Object对象，那么再来试试将`JSON对象`整体存到文本文件中。\r\n如果要存到本地文件，那么就必须把Object对象转换为Str格式的字符串。\r\njson库自带.dumps()函数可以进行转化。\r\n但是这里问题出现了！我们来小试一下：\r\n![image](https://user-images.githubusercontent.com/14041622/35958250-b7b04900-0cda-11e8-860b-bc1494274be5.png)\r\n> 竟然连`print大法`都不能把`json.dumps()`返回的内容正确打印出来。经过各种测试和查看官网对于此函数的文档，发现：\r\n\r\n### 原来`json.dumps()`是默认所有非ascii码强制转化为代号（而非汉字）的，于`repr()`效果等同！\r\n[官方文档](https://docs.python.org/2/library/json.html#encoders-and-decoders)里有说明，`json.dumps()`里面有个`ensure_ascii`参数，默认为True。\r\n意思就是默认把所有非ascii字码用`\\`强制转化。所以，为了关闭这个功能，我们必须把它设为`False`.\r\n下面是个小测试：\r\n![image](https://user-images.githubusercontent.com/14041622/35958259-c42808e4-0cda-11e8-87ca-dc16e0816567.png)\r\n\r\n### 这样一来JSON在Python里的编码问题就解决了：须用`json.dumps(obj,  ensure_ascii=False)`来转化为字符串\r\n\r\n下面是完整的代码测试：\r\n```python\r\n# @网络资源到本地存储真实测试\r\nimport requests,json\r\n\r\nr = requests.get('https://api.github.com/repos/solomonxie/solomonxie.github.io/issues/25/comments')\r\n\r\n# 获取到我的github中某条issue的所有评论，形式为<JSON格式的字符串>\r\ncomments = json.loads( r.content )\r\n\r\noutgoing = json.dumps( comments, ensure_ascii=False )\r\n\r\nwith open('test.txt', 'w') as f:\r\n    f.write(outgoing.encode('utf-8'))\r\nwith open('test.txt', 'r') as f:\r\n    read = f.read()\r\n    \r\nprint read[0:20], type(read)\r\n```\r\n来看结果：\r\n![image](https://user-images.githubusercontent.com/14041622/35958296-f90e1260-0cda-11e8-8aed-2a320a9ac6f1.png)\r\n\r\n## 大功告成！"},{"url":"https://api.github.com/repos/solomonxie/solomonxie.github.io/issues/comments/364050902","html_url":"https://github.com/solomonxie/solomonxie.github.io/issues/24#issuecomment-364050902","issue_url":"https://api.github.com/repos/solomonxie/solomonxie.github.io/issues/24","id":364050902,"user":{"login":"solomonxie","id":14041622,"avatar_url":"https://avatars2.githubusercontent.com/u/14041622?v=4","gravatar_id":"","url":"https://api.github.com/users/solomonxie","html_url":"https://github.com/solomonxie","followers_url":"https://api.github.com/users/solomonxie/followers","following_url":"https://api.github.com/users/solomonxie/following{/other_user}","gists_url":"https://api.github.com/users/solomonxie/gists{/gist_id}","starred_url":"https://api.github.com/users/solomonxie/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/solomonxie/subscriptions","organizations_url":"https://api.github.com/users/solomonxie/orgs","repos_url":"https://api.github.com/users/solomonxie/repos","events_url":"https://api.github.com/users/solomonxie/events{/privacy}","received_events_url":"https://api.github.com/users/solomonxie/received_events","type":"User","site_admin":false},"created_at":"2018-02-08T09:22:04Z","updated_at":"2018-02-08T09:22:04Z","author_association":"OWNER","body":"# 更多Python编码的小细节\r\n\r\n## 数组`.join()`合并\r\n数组中必须所有的元素都是字符串，且都是统一的编码才能合并，否则报错。统一后，如果全是unicode，那么返回的字符串就是unicode；如果元素全是str，那么返回的就是str。\r\n![image](https://user-images.githubusercontent.com/14041622/35965010-6c01a23c-0cf4-11e8-81ce-9340217d9553.png)\r\n\r\n\r\n"},{"url":"https://api.github.com/repos/solomonxie/solomonxie.github.io/issues/comments/364093665","html_url":"https://github.com/solomonxie/solomonxie.github.io/issues/24#issuecomment-364093665","issue_url":"https://api.github.com/repos/solomonxie/solomonxie.github.io/issues/24","id":364093665,"user":{"login":"solomonxie","id":14041622,"avatar_url":"https://avatars2.githubusercontent.com/u/14041622?v=4","gravatar_id":"","url":"https://api.github.com/users/solomonxie","html_url":"https://github.com/solomonxie","followers_url":"https://api.github.com/users/solomonxie/followers","following_url":"https://api.github.com/users/solomonxie/following{/other_user}","gists_url":"https://api.github.com/users/solomonxie/gists{/gist_id}","starred_url":"https://api.github.com/users/solomonxie/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/solomonxie/subscriptions","organizations_url":"https://api.github.com/users/solomonxie/orgs","repos_url":"https://api.github.com/users/solomonxie/repos","events_url":"https://api.github.com/users/solomonxie/events{/privacy}","received_events_url":"https://api.github.com/users/solomonxie/received_events","type":"User","site_admin":false},"created_at":"2018-02-08T12:12:22Z","updated_at":"2018-02-08T13:00:44Z","author_association":"OWNER","body":"# python将某个目录打包为`zip`文件\r\n比较古老的方法是用`zipfile`库创建zip包，但是要写各种循环迭代需要很多行代码。\r\n还有另一种[python自带库`shutil`](http://python.usyiyi.cn/translate/python_278/library/shutil.html),可以一句话打包为zip文件。\r\n```\r\nimport shutil\r\nshutil.make_archive(base_name, format, root_dir, base_dir)\r\n```\r\n很快就打包好了！\r\n唯一注意的是，怎样把它安装自己想象的结构打包。\r\n- base_name，是加上完整路径（不能缩写）的文件或文件夹名\r\n- format一般是zip，其它tar之类也行\r\n- root_dir是要压缩的目录或文件\r\n- base_dir是压缩包里的文件层级。如你写`a/b/c`，这样所有文件都会塞到最底层的c文件夹中。"},{"url":"https://api.github.com/repos/solomonxie/solomonxie.github.io/issues/comments/364098319","html_url":"https://github.com/solomonxie/solomonxie.github.io/issues/24#issuecomment-364098319","issue_url":"https://api.github.com/repos/solomonxie/solomonxie.github.io/issues/24","id":364098319,"user":{"login":"solomonxie","id":14041622,"avatar_url":"https://avatars2.githubusercontent.com/u/14041622?v=4","gravatar_id":"","url":"https://api.github.com/users/solomonxie","html_url":"https://github.com/solomonxie","followers_url":"https://api.github.com/users/solomonxie/followers","following_url":"https://api.github.com/users/solomonxie/following{/other_user}","gists_url":"https://api.github.com/users/solomonxie/gists{/gist_id}","starred_url":"https://api.github.com/users/solomonxie/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/solomonxie/subscriptions","organizations_url":"https://api.github.com/users/solomonxie/orgs","repos_url":"https://api.github.com/users/solomonxie/repos","events_url":"https://api.github.com/users/solomonxie/events{/privacy}","received_events_url":"https://api.github.com/users/solomonxie/received_events","type":"User","site_admin":false},"created_at":"2018-02-08T12:33:54Z","updated_at":"2018-02-08T12:33:54Z","author_association":"OWNER","body":"# Python 日期和时间\r\n```\r\nfrom datetime import date\r\nprint str( date.today() )\r\n```"},{"url":"https://api.github.com/repos/solomonxie/solomonxie.github.io/issues/comments/364218628","html_url":"https://github.com/solomonxie/solomonxie.github.io/issues/24#issuecomment-364218628","issue_url":"https://api.github.com/repos/solomonxie/solomonxie.github.io/issues/24","id":364218628,"user":{"login":"solomonxie","id":14041622,"avatar_url":"https://avatars2.githubusercontent.com/u/14041622?v=4","gravatar_id":"","url":"https://api.github.com/users/solomonxie","html_url":"https://github.com/solomonxie","followers_url":"https://api.github.com/users/solomonxie/followers","following_url":"https://api.github.com/users/solomonxie/following{/other_user}","gists_url":"https://api.github.com/users/solomonxie/gists{/gist_id}","starred_url":"https://api.github.com/users/solomonxie/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/solomonxie/subscriptions","organizations_url":"https://api.github.com/users/solomonxie/orgs","repos_url":"https://api.github.com/users/solomonxie/repos","events_url":"https://api.github.com/users/solomonxie/events{/privacy}","received_events_url":"https://api.github.com/users/solomonxie/received_events","type":"User","site_admin":false},"created_at":"2018-02-08T19:17:15Z","updated_at":"2018-02-09T11:23:46Z","author_association":"OWNER","body":"# Python调试工具`pdb` —— Python Debuger\r\n[参考文章1](https://zhuanlan.zhihu.com/p/25942045)。\r\n[参考文章2](https://docs.python.org/2/library/pdb.html)\r\n![image](https://user-images.githubusercontent.com/14041622/35992333-f5e0e544-0d44-11e8-868c-3722bbb24903.png)\r\n\r\n![image](https://user-images.githubusercontent.com/14041622/35991850-77a2bb90-0d43-11e8-9aad-a46cb9869136.png)\r\n"},{"url":"https://api.github.com/repos/solomonxie/solomonxie.github.io/issues/comments/364229177","html_url":"https://github.com/solomonxie/solomonxie.github.io/issues/24#issuecomment-364229177","issue_url":"https://api.github.com/repos/solomonxie/solomonxie.github.io/issues/24","id":364229177,"user":{"login":"solomonxie","id":14041622,"avatar_url":"https://avatars2.githubusercontent.com/u/14041622?v=4","gravatar_id":"","url":"https://api.github.com/users/solomonxie","html_url":"https://github.com/solomonxie","followers_url":"https://api.github.com/users/solomonxie/followers","following_url":"https://api.github.com/users/solomonxie/following{/other_user}","gists_url":"https://api.github.com/users/solomonxie/gists{/gist_id}","starred_url":"https://api.github.com/users/solomonxie/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/solomonxie/subscriptions","organizations_url":"https://api.github.com/users/solomonxie/orgs","repos_url":"https://api.github.com/users/solomonxie/repos","events_url":"https://api.github.com/users/solomonxie/events{/privacy}","received_events_url":"https://api.github.com/users/solomonxie/received_events","type":"User","site_admin":false},"created_at":"2018-02-08T19:55:15Z","updated_at":"2018-02-08T19:56:14Z","author_association":"OWNER","body":"# 用requests报错`requests.exceptions.SSLError`\r\n![image](https://user-images.githubusercontent.com/14041622/35994940-df8d7214-0d4c-11e8-95fa-b4824ddde4d8.png)\r\n明明没有改代码，突然就报这种错误。\r\n调查发现，原来是被服务器拒了。可能是今天来回调试，多次访问同一个地址，就被屏蔽了。\r\n但是，同样是没有设置请求Headers的客户端postman和insomnia就还能正常访问，不知道为什么。"},{"url":"https://api.github.com/repos/solomonxie/solomonxie.github.io/issues/comments/364545126","html_url":"https://github.com/solomonxie/solomonxie.github.io/issues/24#issuecomment-364545126","issue_url":"https://api.github.com/repos/solomonxie/solomonxie.github.io/issues/24","id":364545126,"user":{"login":"solomonxie","id":14041622,"avatar_url":"https://avatars2.githubusercontent.com/u/14041622?v=4","gravatar_id":"","url":"https://api.github.com/users/solomonxie","html_url":"https://github.com/solomonxie","followers_url":"https://api.github.com/users/solomonxie/followers","following_url":"https://api.github.com/users/solomonxie/following{/other_user}","gists_url":"https://api.github.com/users/solomonxie/gists{/gist_id}","starred_url":"https://api.github.com/users/solomonxie/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/solomonxie/subscriptions","organizations_url":"https://api.github.com/users/solomonxie/orgs","repos_url":"https://api.github.com/users/solomonxie/repos","events_url":"https://api.github.com/users/solomonxie/events{/privacy}","received_events_url":"https://api.github.com/users/solomonxie/received_events","type":"User","site_admin":false},"created_at":"2018-02-09T19:53:47Z","updated_at":"2018-02-13T10:59:15Z","author_association":"OWNER","body":"# Python操作Git库 `GitPython`\r\n[参考文章](http://note.qidong.name/2018/01/gitpython/)\r\n[参考文章](http://www.cnblogs.com/baiyangcao/p/gitpython.html)\r\n[复杂点的参考](https://my.oschina.net/hopeMan/blog/141221)\r\n\r\n试了一圈发现，git库的用法设置非常符合原生git命令，只不过之间加了个`.`而已。\r\n比如原本命令行里是`git add .`，这里就是`repo.git.add('.')`，\r\n原本是`git commit -m \"信息\"`，这里就是`repo.git.commit(m='信息')`\r\n可以说减少了很多学习时间，基本上我很多都是没参考文档自己猜出来的也能用。\r\n\r\n```\r\nsudo pip install gitpython\r\n```\r\n库安装好后可以直接在python中用了。\r\n\r\n### 创建、识别、克隆仓库\r\n文件夹地址可以是全路径，也可以是`.`当前文件夹、`../`上级文件夹等用法。\r\n```\r\n# 在文件夹里新建一个仓库，如果已存在git仓库也不报错不覆盖没问题\r\nrepo = git.Repo.init(path='文件夹地址')\r\n\r\n# 选择已有仓库\r\nrepo = git.Repo( '仓库地址' )\r\n\r\n# 克隆仓库\r\nrepo = git.Repo.clone_from(url='git@github.com:USER/REPO.git', to_path='../new')\r\n```\r\n### 常用语句：\r\n```python\r\n# 查看repo状态\r\nprint repo.git.status()   # 返回通常的status几句信息\r\nprint repo.is_dirty()    # 返回是否有改动（包括未add和未commit的）\r\n\r\n# 添加文件 可以是单个文件名，也可以是`[ ]`数组，还可以是`.`代表全部\r\nprint repo.git.add( '文件名' )\r\n\r\n# commit提交\r\nprint repo.git.commit( m='提交信息' )\r\n```\r\n\r\n### 远程交互操作\r\n```python\r\n# 创建remote：\r\nremote = repo.create_remote(name='gitlab', url='git@gitlab.com:USER/REPO.git')\r\n\r\n# 远程交互：\r\nremote = repo.remote()\r\nremote.fetch()\r\nremote.pull()\r\nremote.push()\r\n```\r\n\r\n### 实验效果\r\n```python\r\n # 原意是返回工作区是否改变的状态\r\n# 但是测试发现，工作区有变动它返回False，没变动却返回True\r\nprint repo.is_dirty()\r\n```\r\n\r\n### 生成tar压缩包\r\n```python\r\n# 压缩到 tar 文件\r\nwith open('repo.tar', 'wb') as fp:\r\n    repo.archive(fp)\r\n```"},{"url":"https://api.github.com/repos/solomonxie/solomonxie.github.io/issues/comments/364548873","html_url":"https://github.com/solomonxie/solomonxie.github.io/issues/24#issuecomment-364548873","issue_url":"https://api.github.com/repos/solomonxie/solomonxie.github.io/issues/24","id":364548873,"user":{"login":"solomonxie","id":14041622,"avatar_url":"https://avatars2.githubusercontent.com/u/14041622?v=4","gravatar_id":"","url":"https://api.github.com/users/solomonxie","html_url":"https://github.com/solomonxie","followers_url":"https://api.github.com/users/solomonxie/followers","following_url":"https://api.github.com/users/solomonxie/following{/other_user}","gists_url":"https://api.github.com/users/solomonxie/gists{/gist_id}","starred_url":"https://api.github.com/users/solomonxie/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/solomonxie/subscriptions","organizations_url":"https://api.github.com/users/solomonxie/orgs","repos_url":"https://api.github.com/users/solomonxie/repos","events_url":"https://api.github.com/users/solomonxie/events{/privacy}","received_events_url":"https://api.github.com/users/solomonxie/received_events","type":"User","site_admin":false},"created_at":"2018-02-09T20:05:19Z","updated_at":"2018-02-09T20:05:26Z","author_association":"OWNER","body":"# Pip 显示模块包的安装路径\r\n``` \r\npip show <package name>\r\n```"},{"url":"https://api.github.com/repos/solomonxie/solomonxie.github.io/issues/comments/364680780","html_url":"https://github.com/solomonxie/solomonxie.github.io/issues/24#issuecomment-364680780","issue_url":"https://api.github.com/repos/solomonxie/solomonxie.github.io/issues/24","id":364680780,"user":{"login":"solomonxie","id":14041622,"avatar_url":"https://avatars2.githubusercontent.com/u/14041622?v=4","gravatar_id":"","url":"https://api.github.com/users/solomonxie","html_url":"https://github.com/solomonxie","followers_url":"https://api.github.com/users/solomonxie/followers","following_url":"https://api.github.com/users/solomonxie/following{/other_user}","gists_url":"https://api.github.com/users/solomonxie/gists{/gist_id}","starred_url":"https://api.github.com/users/solomonxie/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/solomonxie/subscriptions","organizations_url":"https://api.github.com/users/solomonxie/orgs","repos_url":"https://api.github.com/users/solomonxie/repos","events_url":"https://api.github.com/users/solomonxie/events{/privacy}","received_events_url":"https://api.github.com/users/solomonxie/received_events","type":"User","site_admin":false},"created_at":"2018-02-10T19:00:09Z","updated_at":"2018-02-10T19:25:45Z","author_association":"OWNER","body":"# Python 删除某文件夹\r\n[参考文章](https://askubuntu.com/questions/555318/delete-all-files-except-files-with-the-extension-pdf-in-a-directory/555326)\r\n- os.remove() will remove a file\r\n- os.rmdir() will remove an empty directory\r\n- [shutil.rmtree()](https://docs.python.org/3/library/shutil.html#shutil.rmtree) will delete a directory and all its contents\r\n\r\n```python\r\n# 删除某个目录及里面所有内容，第二个参数为True时忽略所有错误中断\r\nshutil.rmtree('<path>', True)\r\n```\r\n\r\n\r\n"},{"url":"https://api.github.com/repos/solomonxie/solomonxie.github.io/issues/comments/364909427","html_url":"https://github.com/solomonxie/solomonxie.github.io/issues/24#issuecomment-364909427","issue_url":"https://api.github.com/repos/solomonxie/solomonxie.github.io/issues/24","id":364909427,"user":{"login":"solomonxie","id":14041622,"avatar_url":"https://avatars2.githubusercontent.com/u/14041622?v=4","gravatar_id":"","url":"https://api.github.com/users/solomonxie","html_url":"https://github.com/solomonxie","followers_url":"https://api.github.com/users/solomonxie/followers","following_url":"https://api.github.com/users/solomonxie/following{/other_user}","gists_url":"https://api.github.com/users/solomonxie/gists{/gist_id}","starred_url":"https://api.github.com/users/solomonxie/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/solomonxie/subscriptions","organizations_url":"https://api.github.com/users/solomonxie/orgs","repos_url":"https://api.github.com/users/solomonxie/repos","events_url":"https://api.github.com/users/solomonxie/events{/privacy}","received_events_url":"https://api.github.com/users/solomonxie/received_events","type":"User","site_admin":false},"created_at":"2018-02-12T12:30:59Z","updated_at":"2018-02-14T14:04:45Z","author_association":"OWNER","body":"# Python 异常捕获\r\n常用配置是这样的：\r\n```\r\ntry:\r\n    do_something()\r\nexcept BaseException as e:\r\n    print 'Failed to do something: ' + str(e)\r\n```\r\n"},{"url":"https://api.github.com/repos/solomonxie/solomonxie.github.io/issues/comments/364912304","html_url":"https://github.com/solomonxie/solomonxie.github.io/issues/24#issuecomment-364912304","issue_url":"https://api.github.com/repos/solomonxie/solomonxie.github.io/issues/24","id":364912304,"user":{"login":"solomonxie","id":14041622,"avatar_url":"https://avatars2.githubusercontent.com/u/14041622?v=4","gravatar_id":"","url":"https://api.github.com/users/solomonxie","html_url":"https://github.com/solomonxie","followers_url":"https://api.github.com/users/solomonxie/followers","following_url":"https://api.github.com/users/solomonxie/following{/other_user}","gists_url":"https://api.github.com/users/solomonxie/gists{/gist_id}","starred_url":"https://api.github.com/users/solomonxie/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/solomonxie/subscriptions","organizations_url":"https://api.github.com/users/solomonxie/orgs","repos_url":"https://api.github.com/users/solomonxie/repos","events_url":"https://api.github.com/users/solomonxie/events{/privacy}","received_events_url":"https://api.github.com/users/solomonxie/received_events","type":"User","site_admin":false},"created_at":"2018-02-12T12:44:26Z","updated_at":"2018-02-12T12:44:26Z","author_association":"OWNER","body":"# Python 睡眠\r\n[参考文章](https://www.pythoncentral.io/pythons-time-sleep-pause-wait-sleep-stop-your-code/)\r\n\r\n```python\r\nimport time\r\n \r\n# Wait for 5 seconds\r\ntime.sleep(5)\r\n \r\n# Wait for 300 milliseconds\r\n# .3 can also be used\r\ntime.sleep(.300)\r\n```"},{"url":"https://api.github.com/repos/solomonxie/solomonxie.github.io/issues/comments/364922506","html_url":"https://github.com/solomonxie/solomonxie.github.io/issues/24#issuecomment-364922506","issue_url":"https://api.github.com/repos/solomonxie/solomonxie.github.io/issues/24","id":364922506,"user":{"login":"solomonxie","id":14041622,"avatar_url":"https://avatars2.githubusercontent.com/u/14041622?v=4","gravatar_id":"","url":"https://api.github.com/users/solomonxie","html_url":"https://github.com/solomonxie","followers_url":"https://api.github.com/users/solomonxie/followers","following_url":"https://api.github.com/users/solomonxie/following{/other_user}","gists_url":"https://api.github.com/users/solomonxie/gists{/gist_id}","starred_url":"https://api.github.com/users/solomonxie/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/solomonxie/subscriptions","organizations_url":"https://api.github.com/users/solomonxie/orgs","repos_url":"https://api.github.com/users/solomonxie/repos","events_url":"https://api.github.com/users/solomonxie/events{/privacy}","received_events_url":"https://api.github.com/users/solomonxie/received_events","type":"User","site_admin":false},"created_at":"2018-02-12T13:29:53Z","updated_at":"2018-02-12T13:29:53Z","author_association":"OWNER","body":"# Jupyter Notebook IPython无法识别Module问题\r\n因为Jupyter notebook的python不是系统里的python， 而是运行在`/Users/solomonxie/anaconda2/bin/python`这里的。同时还有其他很多位置、kernel等等问题非常复杂，网上目前还很难找到比较简单的解决方案。\r\n唯一看到的是[这篇文章](https://jakevdp.github.io/blog/2017/12/05/installing-python-packages-from-jupyter/)，讲到很不一样的思路，即用conda还是pip来安装module的分别。"},{"url":"https://api.github.com/repos/solomonxie/solomonxie.github.io/issues/comments/365180719","html_url":"https://github.com/solomonxie/solomonxie.github.io/issues/24#issuecomment-365180719","issue_url":"https://api.github.com/repos/solomonxie/solomonxie.github.io/issues/24","id":365180719,"user":{"login":"solomonxie","id":14041622,"avatar_url":"https://avatars2.githubusercontent.com/u/14041622?v=4","gravatar_id":"","url":"https://api.github.com/users/solomonxie","html_url":"https://github.com/solomonxie","followers_url":"https://api.github.com/users/solomonxie/followers","following_url":"https://api.github.com/users/solomonxie/following{/other_user}","gists_url":"https://api.github.com/users/solomonxie/gists{/gist_id}","starred_url":"https://api.github.com/users/solomonxie/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/solomonxie/subscriptions","organizations_url":"https://api.github.com/users/solomonxie/orgs","repos_url":"https://api.github.com/users/solomonxie/repos","events_url":"https://api.github.com/users/solomonxie/events{/privacy}","received_events_url":"https://api.github.com/users/solomonxie/received_events","type":"User","site_admin":false},"created_at":"2018-02-13T08:04:43Z","updated_at":"2018-02-13T08:10:28Z","author_association":"OWNER","body":"# Python集合的操作\r\n> 有时候在对比两个数组，如果运用上集合的话就会相当精妙。\r\n\r\n### 基本操作\r\n[参考文章](http://blog.csdn.net/business122/article/details/7541486)\r\n```python\r\ns = set([3,5,9,10])\r\nt = set([1,2,3,4,5,6,7,8,9,10])\r\n\r\n# 基本运算\r\na = t | s          # t 和 s的并集  \r\nb = t & s          # t 和 s的交集  \r\nc = t – s          # 求差集（项在t中，但不在s中）  \r\nd = t ^ s          # 对称差集（项在t或s中，但不会同时出现在二者中） \r\n\r\n# 基本操作：  \r\nt.add('x')            # 添加一项  \r\ns.update([10,37,42])  # 添加多项  \r\nt.remove('H')     #删除一项\r\n```\r\n以下来自[官方参考](https://docs.python.org/2/library/sets.html)：\r\n\r\n![image](https://user-images.githubusercontent.com/14041622/36139421-626ac50e-10d8-11e8-8f40-eb63c095956e.png)\r\n\r\n![image](https://user-images.githubusercontent.com/14041622/36139390-467c0b3c-10d8-11e8-95e4-072b164ac9c3.png)\r\n"},{"url":"https://api.github.com/repos/solomonxie/solomonxie.github.io/issues/comments/365617410","html_url":"https://github.com/solomonxie/solomonxie.github.io/issues/24#issuecomment-365617410","issue_url":"https://api.github.com/repos/solomonxie/solomonxie.github.io/issues/24","id":365617410,"user":{"login":"solomonxie","id":14041622,"avatar_url":"https://avatars2.githubusercontent.com/u/14041622?v=4","gravatar_id":"","url":"https://api.github.com/users/solomonxie","html_url":"https://github.com/solomonxie","followers_url":"https://api.github.com/users/solomonxie/followers","following_url":"https://api.github.com/users/solomonxie/following{/other_user}","gists_url":"https://api.github.com/users/solomonxie/gists{/gist_id}","starred_url":"https://api.github.com/users/solomonxie/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/solomonxie/subscriptions","organizations_url":"https://api.github.com/users/solomonxie/orgs","repos_url":"https://api.github.com/users/solomonxie/repos","events_url":"https://api.github.com/users/solomonxie/events{/privacy}","received_events_url":"https://api.github.com/users/solomonxie/received_events","type":"User","site_admin":false},"created_at":"2018-02-14T14:08:08Z","updated_at":"2018-02-14T14:20:48Z","author_association":"OWNER","body":"# python 日志记录\r\n> 简单脚本还好，print足够。但是稍微复杂点，哪怕是三四个文件加起来两三百行代码，调试也开始变复杂起来了。再加上如果是后台长期运行的那种脚本，运行信息的调查更是复杂起来。一开始我还在各种查`crontab`的日志查看，或者是`python后台运行查看`，或者是`python stdout的获取`等等，全都找错了方向。真正的解决方案在于正确的logging。记录好了的话，我不需要去找python的控制台输出`stdout`，也不需要找`crontab`的日志，只需要查看log文件即可。下面是python的logging学习记录。\r\n\r\n参考文章：[Good logging practice in Python](https://fangpenlin.com/posts/2012/08/26/good-logging-practice-in-python/)，[优雅地记录Python程序日志](http://zmister.com/archives/213.html) ，[进阶配置](http://huangming.work/2016-05-29-python-log.html)\r\n\r\n### 最简单的日志输出（无文件记录）\r\n```python\r\nimport logging\r\n \r\nlogging.error(\"出现了错误\")\r\nlogging.info(\"打印信息\")\r\nlogging.warning(\"警告信息\")\r\n```"}]