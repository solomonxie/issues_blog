# Python里中文编码的理解：unicode、utf-8、gbk
又说一遍了，python要想玩转，通古至今的计算机编码史先要精通。上一篇文章《Python中文字符的理解：str()、repr()、print》尽量拆分研究了一下python对字符串的基本处理。这里稍微提升下，开始研究一下python中基本的字符编码异同。
## 先来聊聊万国码：unicode

`万国码unicode`可以被看作当今世界所有文字的统一编码。作为一种基石，不管是什么字只要是保存为unicode就不会错。如果出错，那也只是你选择用什么编码把unicode翻译过来造成的。
根据维基百科，一个字的unicode的基本表现形式为`“U+”然后紧接着一组十六进制的数字`，也就是`U+hhhh`，其中每一个h代表一个**十六进制**数字。如：`U+4f60`代表中文的'你'，在python里会显示成`u'\u4f60'`。最前面的'前的u代表后面这串文字是unicode，而`\u`就是`U+`了，后面的十六进制编码4f60是一样的。
（坑爹的百度百科，竟然说unicode是二进制，其实UTF才会有二进制-_-）

虽然世界上每个字都有唯一的一个unicode，但是它还分为**编码方式**和**实现方式**。这也就是搞晕python编码的万恶之源了。
编码方式刚才讲了，就是`U+hhhh`，可实现方式就复杂了：不同操作系统、不同国家的实现方式还都不同。
维基百科中说：

> Unicode的实现方式不同于编码方式。一个字符的Unicode编码是确定的。但是在实际传输过程中，由于不同系统平台的设计不一定一致，以及出于节省空间的目的，对Unicode编码的实现方式有所不同。
## 再来聊聊UTF-8

前面说到，unicode的实现方式是在哪都不一样的。这个时候，著名的UTF就出现了：Unicode的实现方式称为**Unicode转换格式**（Unicode Transformation Format，简称为**UTF**）
而UTF-8就是unicode实现方式中的一种。
说“实现方式”其实就是“存储方式”
UTF-8其实仍是一个unicode！仍是一个unicode！仍是一个unicode！重要的话说三遍。
起初我的印象里unicode、utf-8、gb2312、ansi之流，区别好像只是一个字的不同翻译语言罢了。其实大错！
Unicode是万国码，utf-8只是unicode的一种实现方式，而gb2312与gbk是中国码，与unicode同级！
也就是说，**当我们在讨论UTF-8时候，我们是在讨论Unicode**。
所以当我在维基百科看到这句时，我还以为unicode被新生代取缔了：

> 互联网工程工作小组（IETF）要求所有互联网协议都必须支持UTF-8编码[1]。互联网邮件联盟（IMC）建议所有电子邮件软件都支持UTF-8编码。

说回python来，这也就是为什么我不断换着法地把中文'你好'编译成utf-8输出都显示不出'你好'的原因——因为utf-8本来就显示不出中文来！这句话等同于unicode显示不出中文来。因为他们都只是代号。
所以，要想显示出中文，就必须找到能把这些代码翻译成中文的“字典”。
## 曾经那么亲切的GB2312

其实真正用起来，能把unicode翻译出人能看懂的'你好'来的，就只有GB2312系列了。在国内搞工程的都知道，凡是什么前面加`GB`两字，那就是“国(Guo)标(Biao)”了。GB 2312的全称叫`中华人民共和国国家标准简体中文字符集`。
同理GBK，它的全称叫`汉字内码扩展规范`。拼音就是“国(Guo)标(Biao)扩(Kuo)展”。这样就好理解了。GBK只是一本gb2312的扩展版本。
凡人来理解的话，GB2312就是一个密码本，或者叫它一本字典。
## python中字符串'你好'到底是什么格式呢？

python中听到最多的就是，必须通通地用utf-8，这样万无一失。起初我以为，"你好"这样的中文，是一种utf-8格式的字符，其实大错特错！
我们看到的中文，简单说可以归到gb2312或者gbk里面。
而gb2312或gbk，其实就是一本字典，汉字字典。里面会告诉你`\u0e24\u0e43`这个代码，对应的是中文`你`字，`\u0e1a\u0e23`对应的是中文`好`字。
听说utf-8也是一种编码，那它也是一本字典吗？对，它是字典，**但utf-8不是汉语字典！！**
## 中文字符编码成unicode、utf8和gbk是什么样子呢？

```
>>> '你好'
'\xc4\xe3\xba\xc3'
>>> uni = '你好'.decode('gb2312')
>>> uni
u'\u4f60\u597d'
>>> uni.encode('gb2312')
```



