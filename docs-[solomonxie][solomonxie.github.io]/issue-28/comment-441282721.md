# MySQL的主从 Master-Worker

> 所有数据库的主从架构，主要做的都是`读写分离`。

数据库的主从概念，就是指的数据库存储在多台电脑上，互作备份，同时读写分离。也就相当于硬盘组合中的`RAID 1`形式。
一般的设计是，写就直接写入Master数据库，但是读就从各个Worker从数据库来读取。这样的分配是因为一般的读写配比是10: 1。

所以一般商业网站，最少要有2台电脑，一台Master，一台Worker。因为主从在同一台机器上，是完全没有意义的。

![image](https://user-images.githubusercontent.com/14041622/48952832-9f294580-ef7e-11e8-9ef5-6e32dce1377d.png)


整个数据库的备份与修复：
```sh
# 备份某个数据库的所有表结构和数据
$ mysqldump -u root -p "password123" 数据库名 > backup.sql

# 备份整个服务器的所有数据库和数据
$ mysqldump -u root -p "password123" --all-databases --lock-all-tables > master_db.sql

# 修复（导入）备份的数据库：
$ mysql -u root -p "password123" 数据库名 < backup.sql
```
