# Python单例设计模式

参考：黑马 2018 Python教程 面向对象

单例指一个对象只生成一个实例，也就是说对象只会在内存中分配一块区域。比如Music player，一次只能播放一个歌曲，只分配一块内存给它，不能同时播放两首歌。只有当它销毁了，才会生成一个空间给另一首歌。

![image](https://user-images.githubusercontent.com/14041622/48303879-5a97b600-e54b-11e8-9379-2cf79761dfe7.png)

要想达到`单例`这种效果、这种设计模式，就需要涉及内存分配问题。既然涉及到内存分配问题，就需要用到对象的内置函数中涉及内存分配的`__new__`函数来完成。

`__new__`方法有两个作用：
- 在内存中为`对象`分配空间
- 返回`对象`的引用

而实现`单例设计模式`，就是对`__new__`方法的**`重写`**！

重写__new__方法时需要注意：
![image](https://user-images.githubusercontent.com/14041622/48303949-6d5eba80-e54c-11e8-94fb-a19c7d010fd9.png)

如果没有在重写__new__时候返回`对象引用`，那么在生成实例时，就只能得到一个`None`。

重写单例对象的__new__方法的固定格式（必须要遵守）：
```py
def __new__(cls, *args, **kwargs):
    # Your code
    # ........
    # ........

    # Return the generated instance of the object
    return super().__new__(cls)
```