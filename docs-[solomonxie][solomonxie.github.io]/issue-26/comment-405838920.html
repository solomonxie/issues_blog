<!DOCTYPE html>
<!--
==============================================================================
           "GitHub HTML5 Pandoc Template" v2.1 — by Tristano Ajmone           
==============================================================================
Copyright © Tristano Ajmone, 2017, MIT License (MIT). Project's home:

- https://github.com/tajmone/pandoc-goodies

The CSS in this template reuses source code taken from the following projects:

- GitHub Markdown CSS: Copyright © Sindre Sorhus, MIT License (MIT):
  https://github.com/sindresorhus/github-markdown-css

- Primer CSS: Copyright © 2016-2017 GitHub Inc., MIT License (MIT):
  http://primercss.io/

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
The MIT License 

Copyright (c) Tristano Ajmone, 2017 (github.com/tajmone/pandoc-goodies)
Copyright (c) Sindre Sorhus <sindresorhus@gmail.com> (sindresorhus.com)
Copyright (c) 2017 GitHub Inc.

"GitHub Pandoc HTML5 Template" is Copyright (c) Tristano Ajmone, 2017, released
under the MIT License (MIT); it contains readaptations of substantial portions
of the following third party softwares:

(1) "GitHub Markdown CSS", Copyright (c) Sindre Sorhus, MIT License (MIT).
(2) "Primer CSS", Copyright (c) 2016 GitHub Inc., MIT License (MIT).

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in all
copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
SOFTWARE.
==============================================================================-->
<html>
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>comment-405838920</title>
  <style type="text/css">
.markdown-body{-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%;color:#24292e;font-family:-apple-system,system-ui,BlinkMacSystemFont,"Segoe UI",Helvetica,Arial,sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol";font-size:16px;line-height:1.5;word-wrap:break-word;box-sizing:border-box;min-width:200px;max-width:980px;margin:0 auto;padding:45px}.markdown-body a{color:#0366d6;background-color:transparent;text-decoration:none;-webkit-text-decoration-skip:objects}.markdown-body a:active,.markdown-body a:hover{outline-width:0}.markdown-body a:hover{text-decoration:underline}.markdown-body a:not([href]){color:inherit;text-decoration:none}.markdown-body strong{font-weight:600}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{margin-top:24px;margin-bottom:16px;font-weight:600;line-height:1.25}.markdown-body h1{font-size:2em;margin:.67em 0;padding-bottom:.3em;border-bottom:1px solid #eaecef}.markdown-body h2{padding-bottom:.3em;font-size:1.5em;border-bottom:1px solid #eaecef}.markdown-body h3{font-size:1.25em}.markdown-body h4{font-size:1em}.markdown-body h5{font-size:.875em}.markdown-body h6{font-size:.85em;color:#6a737d}.markdown-body img{border-style:none}.markdown-body svg:not(:root){overflow:hidden}.markdown-body hr{box-sizing:content-box;height:.25em;margin:24px 0;padding:0;overflow:hidden;background-color:#e1e4e8;border:0}.markdown-body hr::before{display:table;content:""}.markdown-body hr::after{display:table;clear:both;content:""}.markdown-body input{margin:0;overflow:visible;font:inherit;font-family:inherit;font-size:inherit;line-height:inherit}.markdown-body [type=checkbox]{box-sizing:border-box;padding:0}.markdown-body *{box-sizing:border-box}.markdown-body blockquote{margin:0}.markdown-body ol,.markdown-body ul{padding-left:2em}.markdown-body ol ol,.markdown-body ul ol{list-style-type:lower-roman}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:0;margin-bottom:0}.markdown-body ol ol ol,.markdown-body ol ul ol,.markdown-body ul ol ol,.markdown-body ul ul ol{list-style-type:lower-alpha}.markdown-body li>p{margin-top:16px}.markdown-body li+li{margin-top:.25em}.markdown-body dd{margin-left:0}.markdown-body dl{padding:0}.markdown-body dl dt{padding:0;margin-top:16px;font-size:1em;font-style:italic;font-weight:600}.markdown-body dl dd{padding:0 16px;margin-bottom:16px}.markdown-body code{font-family:SFMono-Regular,Consolas,"Liberation Mono",Menlo,Courier,monospace}.markdown-body pre{font:12px SFMono-Regular,Consolas,"Liberation Mono",Menlo,Courier,monospace;word-wrap:normal}.markdown-body blockquote,.markdown-body dl,.markdown-body ol,.markdown-body p,.markdown-body pre,.markdown-body table,.markdown-body ul{margin-top:0;margin-bottom:16px}.markdown-body blockquote{padding:0 1em;color:#6a737d;border-left:.25em solid #dfe2e5}.markdown-body blockquote>:first-child{margin-top:0}.markdown-body blockquote>:last-child{margin-bottom:0}.markdown-body table{display:block;width:100%;overflow:auto;border-spacing:0;border-collapse:collapse}.markdown-body table th{font-weight:600}.markdown-body table td,.markdown-body table th{padding:6px 13px;border:1px solid #dfe2e5}.markdown-body table tr{background-color:#fff;border-top:1px solid #c6cbd1}.markdown-body table tr:nth-child(2n){background-color:#f6f8fa}.markdown-body img{max-width:100%;box-sizing:content-box;background-color:#fff}.markdown-body code{padding:.2em 0;margin:0;font-size:85%;background-color:rgba(27,31,35,.05);border-radius:3px}.markdown-body code::after,.markdown-body code::before{letter-spacing:-.2em;content:"\00a0"}.markdown-body pre>code{padding:0;margin:0;font-size:100%;word-break:normal;white-space:pre;background:0 0;border:0}.markdown-body .highlight{margin-bottom:16px}.markdown-body .highlight pre{margin-bottom:0;word-break:normal}.markdown-body .highlight pre,.markdown-body pre{padding:16px;overflow:auto;font-size:85%;line-height:1.45;background-color:#f6f8fa;border-radius:3px}.markdown-body pre code{display:inline;max-width:auto;padding:0;margin:0;overflow:visible;line-height:inherit;word-wrap:normal;background-color:transparent;border:0}.markdown-body pre code::after,.markdown-body pre code::before{content:normal}.markdown-body .full-commit .btn-outline:not(:disabled):hover{color:#005cc5;border-color:#005cc5}.markdown-body kbd{box-shadow:inset 0 -1px 0 #959da5;display:inline-block;padding:3px 5px;font:11px/10px SFMono-Regular,Consolas,"Liberation Mono",Menlo,Courier,monospace;color:#444d56;vertical-align:middle;background-color:#fcfcfc;border:1px solid #c6cbd1;border-bottom-color:#959da5;border-radius:3px;box-shadow:inset 0 -1px 0 #959da5}.markdown-body :checked+.radio-label{position:relative;z-index:1;border-color:#0366d6}.markdown-body .task-list-item{list-style-type:none}.markdown-body .task-list-item+.task-list-item{margin-top:3px}.markdown-body .task-list-item input{margin:0 .2em .25em -1.6em;vertical-align:middle}.markdown-body::before{display:table;content:""}.markdown-body::after{display:table;clear:both;content:""}.markdown-body>:first-child{margin-top:0!important}.markdown-body>:last-child{margin-bottom:0!important}.Alert,.Error,.Note,.Success,.Warning{padding:11px;margin-bottom:24px;border-style:solid;border-width:1px;border-radius:4px}.Alert p,.Error p,.Note p,.Success p,.Warning p{margin-top:0}.Alert p:last-child,.Error p:last-child,.Note p:last-child,.Success p:last-child,.Warning p:last-child{margin-bottom:0}.Alert{color:#246;background-color:#e2eef9;border-color:#bac6d3}.Warning{color:#4c4a42;background-color:#fff9ea;border-color:#dfd8c2}.Error{color:#911;background-color:#fcdede;border-color:#d2b2b2}.Success{color:#22662c;background-color:#e2f9e5;border-color:#bad3be}.Note{color:#2f363d;background-color:#f6f8fa;border-color:#d5d8da}.Alert h1,.Alert h2,.Alert h3,.Alert h4,.Alert h5,.Alert h6{color:#246;margin-bottom:0}.Warning h1,.Warning h2,.Warning h3,.Warning h4,.Warning h5,.Warning h6{color:#4c4a42;margin-bottom:0}.Error h1,.Error h2,.Error h3,.Error h4,.Error h5,.Error h6{color:#911;margin-bottom:0}.Success h1,.Success h2,.Success h3,.Success h4,.Success h5,.Success h6{color:#22662c;margin-bottom:0}.Note h1,.Note h2,.Note h3,.Note h4,.Note h5,.Note h6{color:#2f363d;margin-bottom:0}.Alert h1:first-child,.Alert h2:first-child,.Alert h3:first-child,.Alert h4:first-child,.Alert h5:first-child,.Alert h6:first-child,.Error h1:first-child,.Error h2:first-child,.Error h3:first-child,.Error h4:first-child,.Error h5:first-child,.Error h6:first-child,.Note h1:first-child,.Note h2:first-child,.Note h3:first-child,.Note h4:first-child,.Note h5:first-child,.Note h6:first-child,.Success h1:first-child,.Success h2:first-child,.Success h3:first-child,.Success h4:first-child,.Success h5:first-child,.Success h6:first-child,.Warning h1:first-child,.Warning h2:first-child,.Warning h3:first-child,.Warning h4:first-child,.Warning h5:first-child,.Warning h6:first-child{margin-top:0}h1.title,p.subtitle{text-align:center}h1.title.followed-by-subtitle{margin-bottom:0}p.subtitle{font-size:1.5em;font-weight:600;line-height:1.25;margin-top:0;margin-bottom:16px;padding-bottom:.3em}div.line-block{white-space:pre-line}
  </style>
  <style type="text/css">code{white-space: pre;}</style>
  <style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; position: absolute; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; }
pre.numberSource a.sourceLine:empty
  { position: absolute; }
pre.numberSource a.sourceLine::before
  { content: attr(data-line-number);
    position: absolute; left: -5em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
  </style>
  <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
  <![endif]-->
</head>
<body>
<article class="markdown-body">
<h1 id="树莓派安装webdav文件共享服务器nas">树莓派安装WebDav文件共享服务器（NAS）</h1>
<blockquote>
<p>为了做个NAS，折腾了超久的Samba，看似简单，其实Samba的用户设置实在太繁琐，坑太深。用户权限和目录权限、甚至磁盘格式稍有不同，都会导致无法登录。实在不靠谱，实际体验也不是很稳定。 所以在找Alternatives过程中，发现了这个也存在了很久的WebDav协议。</p>
</blockquote>
<p>不像Samba是一个微软开发的软件体系，WebDav只是一种协议，确切说是世界上最普遍的HTTP协议的一个小扩展。<strong>它不是一个软件</strong>。</p>
<blockquote>
<p>所以就好理解，为什么搜索不到WebDav的官网和官方安装指南了——因为没有“官方”。谁都可以开发软件支持这个协议，就像水都可以开发浏览器支持HTTP协议浏览网站一样。</p>
</blockquote>
<p><a href="https://www.howtoforge.com/setting-up-webdav-with-apache2-on-debian-etch">参考：How To Set Up WebDAV With Apache2 On Debian Etch</a></p>
<div class="sourceCode" id="cb1"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb1-1" data-line-number="1"><span class="co"># 安装Apache2服务器</span></a>
<a class="sourceLine" id="cb1-2" data-line-number="2"><span class="fu">sudo</span> apt-get  install  -y apache2</a>
<a class="sourceLine" id="cb1-3" data-line-number="3"></a>
<a class="sourceLine" id="cb1-4" data-line-number="4"><span class="co"># 开启Apache2中对WebDav协议的支持 (记住最好在用户目录下执行否则报错)</span></a>
<a class="sourceLine" id="cb1-5" data-line-number="5"><span class="bu">cd</span> ~</a>
<a class="sourceLine" id="cb1-6" data-line-number="6"><span class="fu">sudo</span> a2enmod dav</a>
<a class="sourceLine" id="cb1-7" data-line-number="7"><span class="fu">sudo</span> a2enmod dav_fs</a>
<a class="sourceLine" id="cb1-8" data-line-number="8"></a>
<a class="sourceLine" id="cb1-9" data-line-number="9"><span class="co"># 创建共享目录并修改权限</span></a>
<a class="sourceLine" id="cb1-10" data-line-number="10"><span class="fu">sudo</span> mkdir -p /var/www/webdav</a>
<a class="sourceLine" id="cb1-11" data-line-number="11"><span class="fu">sudo</span> chown -R www-data:www-data  /var/www/webdav</a>
<a class="sourceLine" id="cb1-12" data-line-number="12"></a>
<a class="sourceLine" id="cb1-13" data-line-number="13"><span class="co"># 创建WebDav的访问用户数据库，顺便创建用户`pi`</span></a>
<a class="sourceLine" id="cb1-14" data-line-number="14"><span class="fu">sudo</span> htpasswd -c /etc/apache2/webdav.password pi</a>
<a class="sourceLine" id="cb1-15" data-line-number="15"><span class="co"># 创建guest用户</span></a>
<a class="sourceLine" id="cb1-16" data-line-number="16"><span class="co">#sudo htpasswd /etc/apache2/webdav.password guest</span></a>
<a class="sourceLine" id="cb1-17" data-line-number="17"></a>
<a class="sourceLine" id="cb1-18" data-line-number="18"><span class="co"># 修改用户数据库访问权限</span></a>
<a class="sourceLine" id="cb1-19" data-line-number="19"><span class="fu">sudo</span> chown root:www-data /etc/apache2/webdav.password</a>
<a class="sourceLine" id="cb1-20" data-line-number="20"><span class="fu">sudo</span> chmod 640 /etc/apache2/webdav.password</a>
<a class="sourceLine" id="cb1-21" data-line-number="21"></a>
<a class="sourceLine" id="cb1-22" data-line-number="22"><span class="co"># 打开默认配置文件</span></a>
<a class="sourceLine" id="cb1-23" data-line-number="23"><span class="fu">sudo</span> vim /etc/apache2/sites-available/000-default.conf</a>
<a class="sourceLine" id="cb1-24" data-line-number="24"></a>
<a class="sourceLine" id="cb1-25" data-line-number="25"><span class="co"># 全部替换为以下内容（记得先备份）：</span></a>
<a class="sourceLine" id="cb1-26" data-line-number="26"></a>
<a class="sourceLine" id="cb1-27" data-line-number="27"><span class="ex">Alias</span> /webdav  /var/www/webdav</a>
<a class="sourceLine" id="cb1-28" data-line-number="28"></a>
<a class="sourceLine" id="cb1-29" data-line-number="29"><span class="op">&lt;</span><span class="ex">Location</span> /webdav<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb1-30" data-line-number="30"> <span class="ex">Options</span> Indexes</a>
<a class="sourceLine" id="cb1-31" data-line-number="31"> <span class="ex">DAV</span> On</a>
<a class="sourceLine" id="cb1-32" data-line-number="32"> <span class="ex">AuthType</span> Basic</a>
<a class="sourceLine" id="cb1-33" data-line-number="33"> <span class="ex">AuthName</span> <span class="st">&quot;webdav&quot;</span></a>
<a class="sourceLine" id="cb1-34" data-line-number="34"> <span class="ex">AuthUserFile</span> /etc/apache2/webdav.password</a>
<a class="sourceLine" id="cb1-35" data-line-number="35"> <span class="ex">Require</span> valid-user</a>
<a class="sourceLine" id="cb1-36" data-line-number="36"> <span class="op">&lt;</span>/<span class="ex">Location</span><span class="op">&gt;</span></a>
<a class="sourceLine" id="cb1-37" data-line-number="37"></a>
<a class="sourceLine" id="cb1-38" data-line-number="38"><span class="co"># 重启Apache2服务器</span></a>
<a class="sourceLine" id="cb1-39" data-line-number="39"><span class="fu">sudo</span> systemctl restart apache2</a>
<a class="sourceLine" id="cb1-40" data-line-number="40"><span class="co"># 或</span></a>
<a class="sourceLine" id="cb1-41" data-line-number="41"><span class="fu">sudo</span> /etc/init.d/apache2 reload</a></code></pre></div>
<p>然后就可以用任意浏览器输入：<code>http://树莓派的IP地址/webdav</code>来访问了。 注意，<code>webdav</code>后面没有<code>/</code>斜杠。</p>
<p>网页中如果正常显示目录中的文件结构，则可以正常访问： <img src="https://user-images.githubusercontent.com/14041622/42874477-d50f3ce8-8ab3-11e8-8c1c-d078f6f9cf56.png" alt="image" /></p>
<p>这一步完成，我们就可以开始把这个共享文件夹映射到Mac、Windows上的本地文件夹了。</p>
<h2 id="磁盘映射">磁盘映射</h2>
<p>网页里只能像FTP一样显示文件目录和下载文件。 如果要正常使用，我们需要把它映射为本地目录才行： - Mac上：在Finder中用<code>CMD+K</code>打开连接服务器选项，输入<code>http://树莓派IP地址/webdav</code>，输入Webdav创建过的用户名密码来完成映射。 - iPhone上：安装网盘访问最强的<code>Readdle Documents</code>，添加WebDav服务，输入信息后就可以访问。直接看文档、看视频、听歌都行。 - Windows上：比较麻烦的是，Win7以上默认只支持HTTPS的网络驱动器，做为HTTP的WebDav是不能连的。所以要修改Windows注册表，让它支持HTTP。方法入下： - 开始菜单 -&gt; 运行 -&gt; 输入regedit 并按回车，就打开了注册表 - 注册表中找到<code>HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Services\WebClient\Parameters\BasicAuthLevel</code>这个项目，把值改为<code>2</code>。 - 开始菜单 -&gt; 运行 -&gt; 输入cmd 并按回车，打开命令行 - 输入<code>net stop webclient</code>并按回车，停止网络客户端 - 输入<code>net start webclient</code>并按回车，开启网络客户端 - 然后在文件夹菜单中找到<code>映射网络驱动器</code>，输入网址<code>http://树莓派IP地址/webdav</code>或<code>\\树莓派IP地址\webdav</code>，然后输入用户名密码，就能映射成功了。 - 浏览器上：随便什么设备，只要是个浏览器就能支持。可以在线播放常用视频，直接打开图片浏览。但是不能上传。</p>
<figure>
<img src="https://user-images.githubusercontent.com/14041622/42875560-a448b3ca-8ab6-11e8-925d-c364431e261a.png" alt="image" /><figcaption>image</figcaption>
</figure>
<h2 id="挂载外部磁盘移动硬盘u盘">挂载外部磁盘（移动硬盘、U盘）</h2>
<p>和Samba一样，只要在<code>/var/www/webdav/</code>这个共享出来的文件夹中，创建个空目录，然后把移动硬盘用<code>mount</code>命令挂载到这个目录上。外部就可以访问了。</p>
<h2 id="使用速度和感受">使用速度和感受</h2>
<p>配置上，比Samba不知道简单到哪里去了。</p>
<p>实验证明，速度非凡！ Mac映射完成后，访问就像本地文件夹一样快，而且可以直接看视频、预览图片、支持原本各种快捷键等。 还可以直接拖放文件来复制，速度也快到和本地复制文件没有区别。 如果对比Samba，最明显的是看图片和视频的打开速度。 Samba要等一秒以上，而WebDav几乎没有等待，或者说和本地打开文件一样速度。 唯一缺点是，Windows访问的话，是很卡很卡的。</p>
<p>稳定性上，因为是基于Apache2的，bug非常少，权限也不用傻傻分不清（和本地用户也没关系）。</p>
<p>远程访问上（我在AWS新加坡服务器上建的WebDav），速度也相当可靠，比我访问树莓派的WebDav还快。毕竟亚马逊服务器配置高网速快。只是视频访问就没那么方便，经常卡顿、发生异常。但是也比较满意了。</p>
<p>总结：WebDav配置方便，访问轻松，权限管理轻松，稳定，超多平台支持，完美！</p>
<h2 id="常见问题">常见问题</h2>
<h3 id="apache2-reload出错">Apache2 Reload出错</h3>
<figure>
<img src="https://user-images.githubusercontent.com/14041622/43150193-e4a2ce62-8f9b-11e8-9e32-021fcc92ed51.png" alt="image" /><figcaption>image</figcaption>
</figure>
<p>用命令<code>sudo /etc/init.d/apache2 reload</code>重启服务器没有反应，用命令<code>sudo /etc/init.d/apache2 reload</code>重新加载Apache2时也报错：</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb2-1" data-line-number="1">[<span class="ex">....</span>] Reloading apache2 configuration (via systemctl)<span class="bu">:</span> apache2.serviceJob for apache2.service failed. See <span class="st">&#39;systemctl status apache2.service&#39;</span> and <span class="st">&#39;journalctl -xn&#39;</span> for details.</a>
<a class="sourceLine" id="cb2-2" data-line-number="2"> <span class="ex">failed</span>!</a></code></pre></div>
<p>一般来讲，很有可能是80端口被占用了，有可能是Nginx。 所以要找到占用端口的服务，并关闭它。</p>
<p>具体方法如下：</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb3-1" data-line-number="1"><span class="co"># 找到所有nginx相关进程</span></a>
<a class="sourceLine" id="cb3-2" data-line-number="2">$  <span class="fu">ps</span> -ef <span class="kw">|</span><span class="fu">grep</span> nginx</a>
<a class="sourceLine" id="cb3-3" data-line-number="3"></a>
<a class="sourceLine" id="cb3-4" data-line-number="4"><span class="co"># 按照显示出的nginx进程号逐一关闭</span></a>
<a class="sourceLine" id="cb3-5" data-line-number="5">$ <span class="fu">sudo</span> kill -TERM 进程号</a>
<a class="sourceLine" id="cb3-6" data-line-number="6"><span class="co"># 或</span></a>
<a class="sourceLine" id="cb3-7" data-line-number="7">$ <span class="ex">pkill</span> -9 nginx</a>
<a class="sourceLine" id="cb3-8" data-line-number="8"></a>
<a class="sourceLine" id="cb3-9" data-line-number="9"><span class="co"># 重新加载Apache2服务器</span></a>
<a class="sourceLine" id="cb3-10" data-line-number="10">$ <span class="fu">sudo</span> /etc/init.d/apache2 reload</a>
<a class="sourceLine" id="cb3-11" data-line-number="11"></a>
<a class="sourceLine" id="cb3-12" data-line-number="12"><span class="co"># 重启Apache2服务器</span></a>
<a class="sourceLine" id="cb3-13" data-line-number="13">$ <span class="fu">sudo</span> systemctl restart apache2</a></code></pre></div>
<p>Reload后成功后就会显示： <img src="https://user-images.githubusercontent.com/14041622/43150359-4b3b9a64-8f9c-11e8-9418-4d205eadfeb0.png" alt="image" /></p>
<p>这样再用浏览器尝试访问webdav服务的网址，就OK了</p>
<h2 id="为什么访问webdav很慢">为什么访问WebDav很慢</h2>
<p>一般来讲，无论是WebDav还是Samba，访问速度慢主要有这些因素： - 服务器网速不够 - 本机客户端电脑的网速不够 - 路由器速度有限 - 服务器硬盘（或U盘）配置太低（转速低） - 服务器主机电脑配置低：CPU、内存都不足 （树莓派就是这样） - 客户端所在的电脑配置低</p>
<p>所以，如果以上所有原因都不构成连接速度慢的原因的话，才需要考虑是不是WebDav软件设置和架构出了问题。</p>
</article>
</body>
</html>
