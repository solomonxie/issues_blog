# Network Protocols 网络协议学习

[Refer to Wiki: Internet protocol suite](https://www.wikiwand.com/en/Internet_protocol_suite)

![image](https://user-images.githubusercontent.com/14041622/48396713-525f9680-e756-11e8-820e-100216d7eb44.png)

网络传输，较基础的、我们常接触的是TCP或UDP协议，其它各种高级协议如HTTP、FTP、Webdav等都是建立于这些协议之上的。

互联网协议的整体结构如下：
- Physical Layer
    - Internet Layer (IP, ICMP)
        - Transport Layer (TCP, UDP)
            - Application Layer (HTTP, FTP)

我们经常接触的主要是中高层协议。一些常用的协议和访问软件如下：
- TCP
    - HTTP /  HTTPS    <<<  `Chrome Browser`
        - Webdav   <<< `Cyberduck`
    - FTP   <<< `Filezilla`
    - SSH   <<< `Terminal`
    - SMTP (Mail)    <<< `Email client`
    - DNS
    - Shadowsocks   <<< `SS client`
    - VNC / RDP (Remote Desktop)    <<< `Remote desktop client`
- UDP
    - DHCP
    - IPTV

> `TCP`和`UDP`是较为基层的`传输层`协议，在其之下是更底层的IP网络层和Pysical物理层，而在其之上是可以发展出繁多的高级`应用层`协议：如HTTP, FTP, VNC等。


## 学习工具

TCP / UDP 测试用工具会很方便的让人理解服务器和客户端之间是怎么用TCP、UDP协议沟通的。
常用工具如下：
- Windows: `网络调试助手Netassist`，`SocketTest卓岚TCP-UDP调试助手`
- Mac: `ScriptCommunicator`, `网络调试助手`, `iPerf`，`PacketSender`

![image](https://user-images.githubusercontent.com/14041622/48399131-bcc80500-e75d-11e8-9f06-f5ddfd8a1bf2.png)



## HTTP协议

注意事项：
- Browser区分Response回复的Header和Body的方法：Header各个值之间是紧凑的，一旦遇到空行，则视为开始Body内容。所以Body一定要与Header内容空开一行！



## Socket通信

> 现今所有不同电脑、系统、平台等，都是100%的用socket进行通讯。

要实现所有的网络协议，就需要编程来让不同主机之间接收和发送通信。而实现主机之间通信的编程方式，就是采用`socket`方式。

`socket`是一种`进程`间沟通的方式，也可以用于不同主机之间的进程沟通。只要正确的标示出不同主机的进程地址，如`IP:port`就是代表一台主机的某个进程(因为一个端口对应一个进程)，就和本地进程间沟通没什么区别。无论是本地进程间、网络进程间，socket的操作是一样的。

那么，socket是怎么达到不同进程间通讯的呢？
其实很简单，就是：**互相往对方的一个文件写入数据，然后分别读取自己被人写入的数据。**

> 这是*nix的`一切皆文件`的理念。

所以socket通讯的编程操作流程，几乎和我们打开关闭一个文本文件一样。



