# rsync 强大的远程、本地文件夹同步工具

一般Mac、Ubuntu等主流*nix系统，都原生搭配了这个命令，非常好用。但是命令比较复杂，需要学习。

[参考：rsync命令详解](http://coolnull.com/1899.html)

注意事项：
- 目录名后有或没有`/`是很不同的。
`source`代表整个文件夹，`source/`代表这个文件夹下的所有文件。
- 不是所有参数都能搭配在一起用的，经常会互相冲突，所以要记住常用搭配方式。

参数：
```
-v, --verbose  详细模式输出；
-a, --archive  归档模式，表示以递归的方式传输文件，并保持所有文件属性不变，相当于使用了组合参数-rlptgoD;
-r, --recursive 对子目录以递归模式处理;
--delete 删除那些target中有而source没有的文件;
-z, --compress 对备份的文件在传输时进行压缩处理
-S, --sparse 对稀疏文件进行特殊处理以节省target的 空间;
-l, --links 保留软链结;
-H, --hard-links 保留硬链结;
-p, --perms 保持文件权限;
-t, --times 保持文件时间信息;
-g, --group 保持文件属组信息;
-o, --owner 保持文件属主信息;
-D, --devices 保持设备文件信息;
```

## 本地同步
以下为常用的同步语句：
```sh
# 单方向拷贝，同cp命令
$ rsync -r <source> <target>

# 单方向同步 --recursive --delete 注意这两个是固定搭配
# 如果source中没有的，target目录中有的会被删除
$ rsync -r --delete <source> <target>
```


## 远程同步 （SSH连接）

单方向拷贝：本地->远程
```sh
$ rsync -r <local> <user@remote:path>

# 如
$ rsync -r  ~/source/ pi@192.168.1.123:~/target
```

单方向拷贝：远程->本地
```sh
$ rcyn -r <remote>:<path> <local>/

# 如
$ rsync -r pi@192.168.1.123:/home/pi/remote ~/local/
```

双方向同步：远程<->本地