# Webdav的命令行客户端体验 [DRAFT]


## `Cadaver`：类似`ftp`和`smbclient`的shell操作客户端

Cadaver的特点是需要进入特制的shell，在特制shell里面输入命令执行上传下载等操作，而不能直接通过命令行的`cadaver`命令进行这些操作。整体和常用的工具`ftp`,`smbclient`类似。

[参考： Using Cadaver as a WebDAV Client](https://docs.oracle.com/cd/E29542_01/portal.1111/e10235/webdav007.htm#POUSR1607)
[参考：cadaver - Linux Man Pages](https://www.systutorials.com/docs/linux/man/1-cadaver/)


Ubuntu安装：
```sh
$ sudo apt-get install cadaver
```

使用：
```sh
# 连接
$ cadaver http://example/webdav/path

# 进入交互，输入用户名密码
# ...

# 进入cadaver的shell
dav:/

# 输入命令
# ...
```

常用命令：
- `ls`：显示当前路径文件
- `cd`：进入子目录
- `cd ..`：返回上层文件夹
- `get remote/path local/path`：下载远程文件至本地
- `put local/path remote/path`：上传本地文件至远程
- `mget name*`：根据匹配名称，下载多个文件



## `rclone`：类似rsync的同步工具

`rclone`是非常强大的云盘同步工具，支持相当多种类的云盘传输同步：AWS S3, AWS Drive, Dropbox, FTP, Google Drive, Yandex Disk等等数十种。

官方标语是：

> rclone is rsync for Cloud Storage.


[参考：WebDAV - rsync for cloud storage.](https://rclone.org/webdav/)

`rclone`安装比较简单，不需要额外以来，直接到官网下载压缩包，把里面的二进制主程序`rclone`复制到本地类似`/usr/local/bin`到地方就可以运行。只是下载的时候要区分本机的OS和CPU架构。

比如Mac就下载`rclone-current-osx-amd64.zip`，Linux就下载`rclone-current-linux-amd64.zip`，树莓派就下载`rclone-current-linux-arm64.zip`。

官方下载列表：https://downloads.rclone.org/

```sh
# Download and install to sbin
wget https://downloads.rclone.org/rclone-current-linux-arm64.zip && \
unzip rclone-current-linux-*.zip && \
sudo cp rclone-*/rclone /usr/sbin/ && \
rm -r rclone-*/

# Give proper permissions
sudo chown $USER:$USER /usr/sbin/rclone
sudo chmod 755 /usr/sbin/rclone
```

测试：`rclone --version`
如果出现错误`exec format error: rclone`，则说明对应的os和架构版本没有正确下载。

以上把`rclone`这个文件放到任意`/bin`目录下就算安装完成了。直接执行`rclone`命令即可。但是使用之前还要配置具体网盘信息才行。


### 配置

因为不像rsync比较单纯通过ssh传输，rclone支持各种完全不同的网盘，所以在正式传输之前，必须针对指定的网盘进行用户名密码等配置才能开始传输。

