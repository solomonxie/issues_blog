# 进入`docker`的世界
> 最近学习Machine Learning发现好多人都用docker，之前一直听说但是感觉和自己无关。但是现在发现原来docker是个这么方便的东西，可以跨平台（不分什么版本的linux，甚至mac和windows也行）运行。所以这里开一篇来记录学习感受。

[参考：Docker 完全指南](https://wdxtub.com/2017/05/01/docker-guide/)
[参考: Gitbook - Docker — 从入门到实践](https://yeasy.gitbooks.io/docker_practice/content/)

## 理解Docker的逻辑
一开始发现很乱很难理解，觉得所有人都把它说的太复杂了。直到后来发现，其实它的运行逻辑很简单。
实际上，可以把Docker看成是给电脑安装Linux系统时的`Live CD`，或者是给Windows用USB安装系统时的`WinPE`。这样会方便理解一点。

> 回想下自己在给PC或是虚拟机上安装Linux系统时，都会有个Live CD选项。也是就是你可以什么都不安装，直接进入系统，所有的工具都能用，所有的软件都能安装，所有的配置也可以改。只不过你重启过后，一切修改的地方都恢复原样了。

每篇攻略都会提到这三个基本概念：
- 镜像 Image
- 容器 Container
- 仓库 Repo

Image就相当于一个系统光盘的ISO镜像文件，是只读的。你可以直接进入Image中各种操作没有障碍，感觉就像进入`Live CD`系统了。只是所有操作都会在退出时消失，下次进Image时候还是初始的样子。
Container就是给"ISO文件"加了一层可读写的外衣，
Repository就是一个Github网站，只不过不是收集代码，而是收集各种Image镜像。你可以随意上传下载各大厂商或个人制作的镜像。



## 安装Docker
> Docker分CE和EE两个版本，一个社区公开免费，一个商业付费。

[参考官方：About Docker CE](https://docs.docker.com/install/)

### Ubuntu上安装Docker

[参考官方安装步骤：Get Docker CE for Ubuntu](https://docs.docker.com/install/linux/docker-ce/ubuntu/#install-docker-ce)

```sh
#安装SSL相关，让apt通过HTTPS下载：
sudo apt-get install apt-transport-https ca-certificates curl software-properties-common
# 添加docker的GPG key
curl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo apt-key add -
#检查key是否相符（9DC8 5822 9FC7 DD38 854A  E2D8 8D81 803C 0EBF CD88）
sudo apt-key fingerprint 0EBFCD88

#添加docker的apt下载源
sudo add-apt-repository  "deb [arch=amd64] https://download.docker.com/linux/ubuntu $(lsb_release -cs) stable"
#更新源
sudo apt-get update

#下载安装docker
sudo apt-get install docker-ce
```

卸载Docker：
```sh
$ sudo apt-get remove docker docker-engine docker.io
```

### Mac上安装Docker
直接下载app：

![image](https://user-images.githubusercontent.com/14041622/45611088-ce0fd080-ba90-11e8-9db3-8609e0c06077.png)




### 树莓派上安装Docker
> 树莓派是基于ARM架构的，和PC不同。所以即使树莓派上能做一些docker镜像，也不能在别的PC上运行。反过来别的PC上的docker镜像，也不能在树莓派上运行。

[树莓派参考：Get Docker CE for Debian](https://docs.docker.com/install/linux/docker-ce/debian/#os-requirements)




## 运行Docker

常用参数：
```sh
# 进入docke的shell -t，即进入虚拟的一个系统，有自己的/root文件系统结构
$ docker container run -ti

# docker container run -v
```