# Bash脚本判别使用者的身份

经常要在bash脚本里面或者直接对脚本本身加上`sudo`运行命令，但是这引发了一系列的问题。

比如用sudo的时候，脚本里的`~`或`$HOME`指代用户文件夹的这个变量，到底是应该指向我真正的用户文件夹如`/home/pi`呢，还是指向了超级管理员的用户文件夹`/root/`呢？

实际上它指向了`/root/`文件夹，这是我们绝对不想要的。但是很多命令如安装个程序，都不得不用`sudo`，那怎么办？

为了能检测出正确的用户和用户路径，我写了以下脚本，并分别用普通用户`pi`执行和用sudo执行：
```sh
# 简单说明当前的权限者是谁（不推荐！）
$ whoami
(root)>>> root
(pi) >>> pi

# 不同于whoami，能够指出当前有哪些用户登录电脑，包括本机登录和ssh登录的所有人
$ who am i
(root)>>> pi       tty1         2018-11-25 04:18
(pi) >>> pi       tty1         2018-11-25 04:18

$ echo $USER
(root)>>> root
(pi) >>> pi

$ echo $user
>>> 变量不存在

$ echo $LOGUSER
>>> 变量不存在

$ echo $SUDO_USER
>>> 变量不存在

# 用户主目录位置
echo $HOME
(root)>>> /root
(pi) >>> /home/pi

$ 用户主目录位置，等同于$HOME
$ echo ~
(root)>>> /root
(pi) >>> /home/pi


```