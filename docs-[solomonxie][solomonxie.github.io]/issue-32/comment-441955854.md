# Flask 入门

Flask本身相当于一个内核，其他几乎所有的功能都要用到扩展（邮件扩展Flask-Mail，用户认证Flask-Login），都需要用第三方的扩展来实现。

Flask对WSGI (路由)的实现，是采用 Werkzeug，而模板引擎(业务视图) 则使用 Jinja2。这两个是Flask框架的核心。

Flask核心就是作为一个Webapp框架的两个基础部分：
- CGI (WSGI) 路由：是由Werkzeug实现，即将网络请求翻译成Python语言
- Template 业务模版：是由Python流行的Jinja2实现

除此之外，Flask其它一切的都是由第三方插件实现：
包括：
> Flask-SQLalchemy：操作数据库； Flask-migrate：管理迁移数据库； Flask-Mail:邮件； Flask-WTF：表单； Flask-Bable：提供国际化和本地化支持，翻译； Flask-script：插入脚本； Flask-Login：认证用户状态； Flask-OpenID：认证； Flask-RESTful：开发REST API的工具； Flask-Bootstrap：集成前端Twitter Bootstrap框架； Flask-Moment：本地化日期和时间； Flask-Admin：简单而可扩展的管理接口的框架

参考Flask扩展列表：http://flask.pocoo.org/extensions/

## Flask安装

安装很简单：
```sh
$ pip install flask
```

建议在Virtualenv虚拟环境下安装，因为Flask需要一系列的依赖，最好给Flask生成一个专用的生产环境，并生产`requirement.txt`依赖列表：
```sh
# 生产虚拟环境
$ virtualenv ./flask_env
# 启动虚拟环境
$ ./flask_env/bin/active
# 生产依赖列表
$ pip freeze > requirements.txt
```

## Hello World

一个最简单的Flask程序，只需要三步：
- 生成Flask类的实例，即一个APP
- 指定目录的`路由规则`，即不同路径可以实现不同的操作。
- 运行app：`app.run()`

，`hello-world.py`：
```py
from flask import Flask

# 生产一个Flask APP 实例，并指向当前文件(模块)
app = Flask(__name__)

# 指定"／"根目录的路由规则
@app.route('/')
def index():
    return 'Hello World'

# 开始运行app
app.run()
```

Flask中，路由的实现是用装饰器:`@app.route("/")`这种方式来做到的。


## Flask路由规则

指定`请求方式`：
```py
@app.route('/', methods=['GET', 'POST'])
# ...
```

给路由传参数：
```py
@app.route('/orders/<order_id>')
def hello_itheima(order_id):
    return 'The ID of order is: %d' % order_id
```

限制路由参数的数据类型：
```py
@app.route('/orders/<int:order_id>')
# ...
```
其中`int:order_id`是指定参数`order_id`必须能转换成int整数，否则这个请求就会自动被拒绝。
比如用户请求`http://xyz.com/orders/HAHAHAH`，这就不成功。而`http://xyz.com/orders/210`这样的就成功。
![image](https://user-images.githubusercontent.com/14041622/49066649-c91f8800-f25c-11e8-8fd2-d34bae4dd41c.png)

## Flask模版
