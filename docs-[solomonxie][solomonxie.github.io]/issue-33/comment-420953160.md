# `Virtualbox连接网络`

[参考：快速理解VirtualBox的四种网络连接方式](https://www.cnblogs.com/york-hust/archive/2012/03/29/2422911.html)
[参考：VirtualBox中ubuntu的网络设置](https://www.jianshu.com/p/0736623e5806)


## 理解连接方式

Virtualbox连接网络一共有四种方式（其它虚拟机也都差不多一样的称呼）:
- NAT
- Bridged Adapter
- Internal
- Host-only Adapter

![image](https://user-images.githubusercontent.com/14041622/45481586-83374580-b77e-11e8-9f7f-d36edb79ce10.png)


![image](https://user-images.githubusercontent.com/14041622/45481780-08baf580-b77f-11e8-8a93-e36f79d27087.png)

![image](https://user-images.githubusercontent.com/14041622/45481787-0c4e7c80-b77f-11e8-9cd5-19dc293d9b0d.png)

![image](https://user-images.githubusercontent.com/14041622/45481796-0f496d00-b77f-11e8-9154-1d6c838bef78.png)


> 最好用的是Bridge方式
可以满足虚拟机中的所有网络需求,通过使用host主机的网卡,直接连到host网络,此时的虚拟机就和真正的机器一样.虚拟机可以访问外网,可以访问host主机.host主机也可以访问虚拟机.

但是：

> 如果是我们使用的无线网,或者我们没有任何路由器,只是在本机无网络的情况下开发呢?我们就需要使用仅主机模式了




## 让虚拟机又能访问外网又在内网可见
[参考：VirtualBox: 为你的虚拟机配置静态 IP](https://huangruichang.github.io/?techniques/virtualbox-static-ip/index)

这就是需要用到Virtualbox 双网卡适配器。
因为要满足虚拟机能访问外网，又能在内网被识别，就需要两块网卡。所以我们要在Virtualbox中给它设置两个Adapter（网卡）


### 首先在Virtualbox软件的全局设置

![image](https://user-images.githubusercontent.com/14041622/45485618-e333e900-b78a-11e8-8296-41f44e7cf280.png)

设置DHCP（这样虚拟机就能有静态IP了）：
![image](https://user-images.githubusercontent.com/14041622/45485651-fa72d680-b78a-11e8-8295-bb710cfd334e.png)

### 然后设置虚拟主机
首先要在虚拟主机关闭的情况下设置。

开启2个Adapter：NAT和Host-only

NAT适配器采用默认设置：
![image](https://user-images.githubusercontent.com/14041622/45485730-33ab4680-b78b-11e8-8300-8a59cf52ca5f.png)

Host-only设置：
![image](https://user-images.githubusercontent.com/14041622/45485762-4faee800-b78b-11e8-9863-f275fa1e85f6.png)


然后进入虚拟机（Linux）后，就可以通过`ifconfig`看到本机的内网IP了。

![image](https://user-images.githubusercontent.com/14041622/45485880-b502d900-b78b-11e8-8e05-8b4dedc54c74.png)

可以在自己的Host机子上ping一下这个虚拟机，发现可以ping通。

反过来，在虚拟机里ping一下Host（刚才设置全局的一个内网时候的192.168.56.1就是）。